import{d as v,c as d,h as s,a as p,n as C,u as l,j as G,k as y,l as B,w as f,b as g,F as k,f as x,m as $,t as I,q as M,s as S,g as V}from"./index-a61c580c.js";import{G as E}from"./game-c968f6bb.js";const F=v({__name:"GameOpponent",props:{mouse:null},setup(_){const e=_,r=d(()=>{var t;let n=e.mouse.getComponent("pos");return(t=document.getElementById(n.x.toString()+" "+n.y.toString()))==null?void 0:t.getBoundingClientRect()});return(n,t)=>(s(),p("div",{class:"absolute h-2 w-2 bg-blue-400",style:C({top:`${l(r).top}px`,left:`${l(r).left}px`})},null,4))}}),N=v({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(_){const e=_,r=d(()=>{var i;let u=e.player.getComponent("pos");return(i=document.getElementById(u.x.toString()+" "+u.y.toString()))==null?void 0:i.getBoundingClientRect()}),n=G(30),t=u=>{e.gameService.emit(e.player.id,"move",u)},c=y(()=>t("left"),n,{immediate:!1}),o=y(()=>t("down"),n,{immediate:!1}),m=y(()=>t("right"),n,{immediate:!1}),b=y(()=>t("up"),n,{immediate:!1});if(e.controllable){const{arrowleft:u,arrowdown:i,arrowright:h,arrowup:w}=B();f(u,a=>{a?c.resume():c.pause()}),f(i,a=>{a?o.resume():o.pause()}),f(h,a=>{a?m.resume():m.pause()}),f(w,a=>{a?b.resume():b.pause()})}return(u,i)=>(s(),p("div",{class:"absolute h-5 w-5 bg-pink-600",style:C({top:`${l(r).top}px`,left:`${l(r).left}px`})},null,4))}}),P={style:{border:"2px solid black"}},R=g("thead",null,null,-1),j=["id"],z=v({__name:"GameMap",props:{mapComp:null},setup(_){const e=_;return(r,n)=>(s(),p("div",null,[g("table",P,[R,g("tbody",null,[(s(!0),p(k,null,x(e.mapComp.value.map,(t,c)=>(s(),p("tr",{key:c},[(s(!0),p(k,null,x(t,(o,m)=>(s(),p("td",{class:"p-0",key:m},[g("div",{id:c+" "+m,class:$(["grid",{"bg-black":o.type=="underground","bg-white":o.type=="surface","bg-red-500":o.type=="entry","bg-yellow-500":o.type=="meeting","ring-2 ring-red-500":o.occupied!==null}])},null,10,j)]))),128))]))),128))])])]))}});const D={class:"h-full w-full bg-sky-700 flex justify-center items-center"},q=v({__name:"SinglePlayerGameView",setup(_){const e=new E,r="singleplayer",n=e.killCount;setTimeout(()=>{e.startGame([r])},1e3);const t=d(()=>e.currentState.value),c=d(()=>e.map),o=d(()=>t.value.players&&t.value.players[r]),m=d(()=>t.value.opponents);return(b,u)=>{const i=z,h=N,w=F;return s(),p("div",D,[g("h1",null,I(l(n)),1),M(i,{"map-comp":l(c)},null,8,["map-comp"]),l(o)!==void 0?(s(),S(h,{key:0,player:l(o),"game-service":l(e),controllable:""},null,8,["player","game-service"])):V("",!0),g("ul",null,[(s(!0),p(k,null,x(l(m),a=>(s(),S(w,{key:a.id,mouse:a},null,8,["mouse"]))),128))])])}}});export{q as default};
