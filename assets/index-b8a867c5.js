var Ga=Object.defineProperty;var Ha=(e,t,r)=>t in e?Ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Qe=(e,t,r)=>(Ha(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Jn(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}function Wn(e){if(H(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=pe(n)?Wa(n):Wn(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(pe(e))return e;if(ce(e))return e}}const Ka=/;(?![^(]*\))/g,Va=/:([^]+)/,Ja=/\/\*.*?\*\//gs;function Wa(e){const t={};return e.replace(Ja,"").split(Ka).forEach(r=>{if(r){const n=r.split(Va);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function qn(e){let t="";if(pe(e))t=e;else if(H(e))for(let r=0;r<e.length;r++){const n=qn(e[r]);n&&(t+=n+" ")}else if(ce(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const qa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qa=Jn(qa);function Jo(e){return!!e||e===""}const Ap=e=>pe(e)?e:e==null?"":H(e)||ce(e)&&(e.toString===Yo||!V(e.toString))?JSON.stringify(e,Wo,2):String(e),Wo=(e,t)=>t&&t.__v_isRef?Wo(e,t.value):Lt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:qo(t)?{[`Set(${t.size})`]:[...t.values()]}:ce(t)&&!H(t)&&!Xo(t)?String(t):t,ae={},wt=[],Ge=()=>{},Ya=()=>!1,Xa=/^on[^a-z]/,Yr=e=>Xa.test(e),Qn=e=>e.startsWith("onUpdate:"),Ee=Object.assign,Yn=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Za=Object.prototype.hasOwnProperty,Q=(e,t)=>Za.call(e,t),H=Array.isArray,Lt=e=>Xr(e)==="[object Map]",qo=e=>Xr(e)==="[object Set]",V=e=>typeof e=="function",pe=e=>typeof e=="string",Xn=e=>typeof e=="symbol",ce=e=>e!==null&&typeof e=="object",Qo=e=>ce(e)&&V(e.then)&&V(e.catch),Yo=Object.prototype.toString,Xr=e=>Yo.call(e),ec=e=>Xr(e).slice(8,-1),Xo=e=>Xr(e)==="[object Object]",Zn=e=>pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mr=Jn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zr=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},tc=/-(\w)/g,Ut=Zr(e=>e.replace(tc,(t,r)=>r?r.toUpperCase():"")),rc=/\B([A-Z])/g,Mt=Zr(e=>e.replace(rc,"-$1").toLowerCase()),Zo=Zr(e=>e.charAt(0).toUpperCase()+e.slice(1)),un=Zr(e=>e?`on${Zo(e)}`:""),pr=(e,t)=>!Object.is(e,t),pn=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Nr=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},nc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let xi;const ic=()=>xi||(xi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let je;class es{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=je,!t&&je&&(this.index=(je.scopes||(je.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=je;try{return je=this,t()}finally{je=r}}}on(){je=this}off(){je=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function oc(e){return new es(e)}function sc(e,t=je){t&&t.active&&t.effects.push(e)}function ts(){return je}function ac(e){je&&je.cleanups.push(e)}const ei=e=>{const t=new Set(e);return t.w=0,t.n=0,t},rs=e=>(e.w&_t)>0,ns=e=>(e.n&_t)>0,cc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=_t},lc=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];rs(i)&&!ns(i)?i.delete(e):t[r++]=i,i.w&=~_t,i.n&=~_t}t.length=r}},Pn=new WeakMap;let rr=0,_t=1;const En=30;let $e;const xt=Symbol(""),Rn=Symbol("");class ti{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,sc(this,n)}run(){if(!this.active)return this.fn();let t=$e,r=vt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=$e,$e=this,vt=!0,_t=1<<++rr,rr<=En?cc(this):ki(this),this.fn()}finally{rr<=En&&lc(this),_t=1<<--rr,$e=this.parent,vt=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){$e===this?this.deferStop=!0:this.active&&(ki(this),this.onStop&&this.onStop(),this.active=!1)}}function ki(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let vt=!0;const is=[];function Wt(){is.push(vt),vt=!1}function qt(){const e=is.pop();vt=e===void 0?!0:e}function Ie(e,t,r){if(vt&&$e){let n=Pn.get(e);n||Pn.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=ei()),os(i)}}function os(e,t){let r=!1;rr<=En?ns(e)||(e.n|=_t,r=!rs(e)):r=!e.has($e),r&&(e.add($e),$e.deps.push(e))}function ut(e,t,r,n,i,o){const a=Pn.get(e);if(!a)return;let l=[];if(t==="clear")l=[...a.values()];else if(r==="length"&&H(e)){const s=Number(n);a.forEach((c,f)=>{(f==="length"||f>=s)&&l.push(c)})}else switch(r!==void 0&&l.push(a.get(r)),t){case"add":H(e)?Zn(r)&&l.push(a.get("length")):(l.push(a.get(xt)),Lt(e)&&l.push(a.get(Rn)));break;case"delete":H(e)||(l.push(a.get(xt)),Lt(e)&&l.push(a.get(Rn)));break;case"set":Lt(e)&&l.push(a.get(xt));break}if(l.length===1)l[0]&&xn(l[0]);else{const s=[];for(const c of l)c&&s.push(...c);xn(ei(s))}}function xn(e,t){const r=H(e)?e:[...e];for(const n of r)n.computed&&Oi(n);for(const n of r)n.computed||Oi(n)}function Oi(e,t){(e!==$e||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const fc=Jn("__proto__,__v_isRef,__isVue"),ss=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xn)),uc=ri(),pc=ri(!1,!0),dc=ri(!0),Di=hc();function hc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=X(this);for(let o=0,a=this.length;o<a;o++)Ie(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(X)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Wt();const n=X(this)[t].apply(this,r);return qt(),n}}),e}function mc(e){const t=X(this);return Ie(t,"has",e),t.hasOwnProperty(e)}function ri(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Mc:us:t?fs:ls).get(n))return n;const a=H(n);if(!e){if(a&&Q(Di,i))return Reflect.get(Di,i,o);if(i==="hasOwnProperty")return mc}const l=Reflect.get(n,i,o);return(Xn(i)?ss.has(i):fc(i))||(e||Ie(n,"get",i),t)?l:ge(l)?a&&Zn(i)?l:l.value:ce(l)?e?oi(l):Ot(l):l}}const gc=as(),vc=as(!0);function as(e=!1){return function(r,n,i,o){let a=r[n];if(zt(a)&&ge(a)&&!ge(i))return!1;if(!e&&(!Ur(i)&&!zt(i)&&(a=X(a),i=X(i)),!H(r)&&ge(a)&&!ge(i)))return a.value=i,!0;const l=H(r)&&Zn(n)?Number(n)<r.length:Q(r,n),s=Reflect.set(r,n,i,o);return r===X(o)&&(l?pr(i,a)&&ut(r,"set",n,i):ut(r,"add",n,i)),s}}function yc(e,t){const r=Q(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&ut(e,"delete",t,void 0),n}function _c(e,t){const r=Reflect.has(e,t);return(!Xn(t)||!ss.has(t))&&Ie(e,"has",t),r}function bc(e){return Ie(e,"iterate",H(e)?"length":xt),Reflect.ownKeys(e)}const cs={get:uc,set:gc,deleteProperty:yc,has:_c,ownKeys:bc},Cc={get:dc,set(e,t){return!0},deleteProperty(e,t){return!0}},Sc=Ee({},cs,{get:pc,set:vc}),ni=e=>e,en=e=>Reflect.getPrototypeOf(e);function Sr(e,t,r=!1,n=!1){e=e.__v_raw;const i=X(e),o=X(t);r||(t!==o&&Ie(i,"get",t),Ie(i,"get",o));const{has:a}=en(i),l=n?ni:r?ci:dr;if(a.call(i,t))return l(e.get(t));if(a.call(i,o))return l(e.get(o));e!==i&&e.get(t)}function Tr(e,t=!1){const r=this.__v_raw,n=X(r),i=X(e);return t||(e!==i&&Ie(n,"has",e),Ie(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function Pr(e,t=!1){return e=e.__v_raw,!t&&Ie(X(e),"iterate",xt),Reflect.get(e,"size",e)}function Mi(e){e=X(e);const t=X(this);return en(t).has.call(t,e)||(t.add(e),ut(t,"add",e,e)),this}function Ii(e,t){t=X(t);const r=X(this),{has:n,get:i}=en(r);let o=n.call(r,e);o||(e=X(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?pr(t,a)&&ut(r,"set",e,t):ut(r,"add",e,t),this}function Ai(e){const t=X(this),{has:r,get:n}=en(t);let i=r.call(t,e);i||(e=X(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&ut(t,"delete",e,void 0),o}function ji(){const e=X(this),t=e.size!==0,r=e.clear();return t&&ut(e,"clear",void 0,void 0),r}function Er(e,t){return function(n,i){const o=this,a=o.__v_raw,l=X(a),s=t?ni:e?ci:dr;return!e&&Ie(l,"iterate",xt),a.forEach((c,f)=>n.call(i,s(c),s(f),o))}}function Rr(e,t,r){return function(...n){const i=this.__v_raw,o=X(i),a=Lt(o),l=e==="entries"||e===Symbol.iterator&&a,s=e==="keys"&&a,c=i[e](...n),f=r?ni:t?ci:dr;return!t&&Ie(o,"iterate",s?Rn:xt),{next(){const{value:u,done:p}=c.next();return p?{value:u,done:p}:{value:l?[f(u[0]),f(u[1])]:f(u),done:p}},[Symbol.iterator](){return this}}}}function dt(e){return function(...t){return e==="delete"?!1:this}}function Tc(){const e={get(o){return Sr(this,o)},get size(){return Pr(this)},has:Tr,add:Mi,set:Ii,delete:Ai,clear:ji,forEach:Er(!1,!1)},t={get(o){return Sr(this,o,!1,!0)},get size(){return Pr(this)},has:Tr,add:Mi,set:Ii,delete:Ai,clear:ji,forEach:Er(!1,!0)},r={get(o){return Sr(this,o,!0)},get size(){return Pr(this,!0)},has(o){return Tr.call(this,o,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:Er(!0,!1)},n={get(o){return Sr(this,o,!0,!0)},get size(){return Pr(this,!0)},has(o){return Tr.call(this,o,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:Er(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Rr(o,!1,!1),r[o]=Rr(o,!0,!1),t[o]=Rr(o,!1,!0),n[o]=Rr(o,!0,!0)}),[e,r,t,n]}const[Pc,Ec,Rc,xc]=Tc();function ii(e,t){const r=t?e?xc:Rc:e?Ec:Pc;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Q(r,i)&&i in n?r:n,i,o)}const kc={get:ii(!1,!1)},Oc={get:ii(!1,!0)},Dc={get:ii(!0,!1)},ls=new WeakMap,fs=new WeakMap,us=new WeakMap,Mc=new WeakMap;function Ic(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ac(e){return e.__v_skip||!Object.isExtensible(e)?0:Ic(ec(e))}function Ot(e){return zt(e)?e:si(e,!1,cs,kc,ls)}function jc(e){return si(e,!1,Sc,Oc,fs)}function oi(e){return si(e,!0,Cc,Dc,us)}function si(e,t,r,n,i){if(!ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=Ac(e);if(a===0)return e;const l=new Proxy(e,a===2?n:r);return i.set(e,l),l}function Ft(e){return zt(e)?Ft(e.__v_raw):!!(e&&e.__v_isReactive)}function zt(e){return!!(e&&e.__v_isReadonly)}function Ur(e){return!!(e&&e.__v_isShallow)}function ps(e){return Ft(e)||zt(e)}function X(e){const t=e&&e.__v_raw;return t?X(t):e}function ai(e){return Nr(e,"__v_skip",!0),e}const dr=e=>ce(e)?Ot(e):e,ci=e=>ce(e)?oi(e):e;function ds(e){vt&&$e&&(e=X(e),os(e.dep||(e.dep=ei())))}function li(e,t){e=X(e);const r=e.dep;r&&xn(r)}function ge(e){return!!(e&&e.__v_isRef===!0)}function Ke(e){return hs(e,!1)}function Bc(e){return hs(e,!0)}function hs(e,t){return ge(e)?e:new wc(e,t)}class wc{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:X(t),this._value=r?t:dr(t)}get value(){return ds(this),this._value}set value(t){const r=this.__v_isShallow||Ur(t)||zt(t);t=r?t:X(t),pr(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:dr(t),li(this))}}function jp(e){li(e)}function et(e){return ge(e)?e.value:e}const Lc={get:(e,t,r)=>et(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return ge(i)&&!ge(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function ms(e){return Ft(e)?e:new Proxy(e,Lc)}var gs;class Fc{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[gs]=!1,this._dirty=!0,this.effect=new ti(t,()=>{this._dirty||(this._dirty=!0,li(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=X(this);return ds(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}gs="__v_isReadonly";function $c(e,t,r=!1){let n,i;const o=V(e);return o?(n=e,i=Ge):(n=e.get,i=e.set),new Fc(n,i,o||!i,r)}function yt(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){tn(o,t,r)}return i}function He(e,t,r,n){if(V(e)){const o=yt(e,t,r,n);return o&&Qo(o)&&o.catch(a=>{tn(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(He(e[o],t,r,n));return i}function tn(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,l=r;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,a,l)===!1)return}o=o.parent}const s=t.appContext.config.errorHandler;if(s){yt(s,null,10,[e,a,l]);return}}Nc(e,r,i,n)}function Nc(e,t,r,n=!0){console.error(e)}let hr=!1,kn=!1;const Ce=[];let Ze=0;const $t=[];let at=null,Et=0;const vs=Promise.resolve();let fi=null;function ui(e){const t=fi||vs;return e?t.then(this?e.bind(this):e):t}function Uc(e){let t=Ze+1,r=Ce.length;for(;t<r;){const n=t+r>>>1;mr(Ce[n])<e?t=n+1:r=n}return t}function pi(e){(!Ce.length||!Ce.includes(e,hr&&e.allowRecurse?Ze+1:Ze))&&(e.id==null?Ce.push(e):Ce.splice(Uc(e.id),0,e),ys())}function ys(){!hr&&!kn&&(kn=!0,fi=vs.then(bs))}function zc(e){const t=Ce.indexOf(e);t>Ze&&Ce.splice(t,1)}function Gc(e){H(e)?$t.push(...e):(!at||!at.includes(e,e.allowRecurse?Et+1:Et))&&$t.push(e),ys()}function Bi(e,t=hr?Ze+1:0){for(;t<Ce.length;t++){const r=Ce[t];r&&r.pre&&(Ce.splice(t,1),t--,r())}}function _s(e){if($t.length){const t=[...new Set($t)];if($t.length=0,at){at.push(...t);return}for(at=t,at.sort((r,n)=>mr(r)-mr(n)),Et=0;Et<at.length;Et++)at[Et]();at=null,Et=0}}const mr=e=>e.id==null?1/0:e.id,Hc=(e,t)=>{const r=mr(e)-mr(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function bs(e){kn=!1,hr=!0,Ce.sort(Hc);const t=Ge;try{for(Ze=0;Ze<Ce.length;Ze++){const r=Ce[Ze];r&&r.active!==!1&&yt(r,null,14)}}finally{Ze=0,Ce.length=0,_s(),hr=!1,fi=null,(Ce.length||$t.length)&&bs()}}function Kc(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||ae;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:p}=n[f]||ae;p&&(i=r.map(m=>pe(m)?m.trim():m)),u&&(i=r.map(nc))}let l,s=n[l=un(t)]||n[l=un(Ut(t))];!s&&o&&(s=n[l=un(Mt(t))]),s&&He(s,e,6,i);const c=n[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,He(c,e,6,i)}}function Cs(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},l=!1;if(!V(e)){const s=c=>{const f=Cs(c,t,!0);f&&(l=!0,Ee(a,f))};!r&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!o&&!l?(ce(e)&&n.set(e,null),null):(H(o)?o.forEach(s=>a[s]=null):Ee(a,o),ce(e)&&n.set(e,a),a)}function rn(e,t){return!e||!Yr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Q(e,t[0].toLowerCase()+t.slice(1))||Q(e,Mt(t))||Q(e,t))}let Ue=null,Ss=null;function zr(e){const t=Ue;return Ue=e,Ss=e&&e.type.__scopeId||null,t}function Vc(e,t=Ue,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Gi(-1);const o=zr(t);let a;try{a=e(...i)}finally{zr(o),n._d&&Gi(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function dn(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:l,attrs:s,emit:c,render:f,renderCache:u,data:p,setupState:m,ctx:g,inheritAttrs:v}=e;let T,_;const P=zr(e);try{if(r.shapeFlag&4){const w=i||n;T=Xe(f.call(w,w,u,o,m,p,g)),_=s}else{const w=t;T=Xe(w.length>1?w(o,{attrs:s,slots:l,emit:c}):w(o,null)),_=t.props?s:Jc(s)}}catch(w){cr.length=0,tn(w,e,1),T=Me(Dt)}let M=T;if(_&&v!==!1){const w=Object.keys(_),{shapeFlag:G}=M;w.length&&G&7&&(a&&w.some(Qn)&&(_=Wc(_,a)),M=Gt(M,_))}return r.dirs&&(M=Gt(M),M.dirs=M.dirs?M.dirs.concat(r.dirs):r.dirs),r.transition&&(M.transition=r.transition),T=M,zr(P),T}const Jc=e=>{let t;for(const r in e)(r==="class"||r==="style"||Yr(r))&&((t||(t={}))[r]=e[r]);return t},Wc=(e,t)=>{const r={};for(const n in e)(!Qn(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function qc(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:l,patchFlag:s}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&s>=0){if(s&1024)return!0;if(s&16)return n?wi(n,a,c):!!a;if(s&8){const f=t.dynamicProps;for(let u=0;u<f.length;u++){const p=f[u];if(a[p]!==n[p]&&!rn(c,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?wi(n,a,c):!0:!!a;return!1}function wi(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!rn(r,o))return!0}return!1}function Qc({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Yc=e=>e.__isSuspense;function Xc(e,t){t&&t.pendingBranch?H(e)?t.effects.push(...e):t.effects.push(e):Gc(e)}function Ir(e,t){if(ue){let r=ue.provides;const n=ue.parent&&ue.parent.provides;n===r&&(r=ue.provides=Object.create(n)),r[e]=t}}function tt(e,t,r=!1){const n=ue||Ue;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&V(t)?t.call(n.proxy):t}}const xr={};function Nt(e,t,r){return Ts(e,t,r)}function Ts(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=ae){const l=ts()===(ue==null?void 0:ue.scope)?ue:null;let s,c=!1,f=!1;if(ge(e)?(s=()=>e.value,c=Ur(e)):Ft(e)?(s=()=>e,n=!0):H(e)?(f=!0,c=e.some(M=>Ft(M)||Ur(M)),s=()=>e.map(M=>{if(ge(M))return M.value;if(Ft(M))return Bt(M);if(V(M))return yt(M,l,2)})):V(e)?t?s=()=>yt(e,l,2):s=()=>{if(!(l&&l.isUnmounted))return u&&u(),He(e,l,3,[p])}:s=Ge,t&&n){const M=s;s=()=>Bt(M())}let u,p=M=>{u=_.onStop=()=>{yt(M,l,4)}},m;if(vr)if(p=Ge,t?r&&He(t,l,3,[s(),f?[]:void 0,p]):s(),i==="sync"){const M=Kl();m=M.__watcherHandles||(M.__watcherHandles=[])}else return Ge;let g=f?new Array(e.length).fill(xr):xr;const v=()=>{if(_.active)if(t){const M=_.run();(n||c||(f?M.some((w,G)=>pr(w,g[G])):pr(M,g)))&&(u&&u(),He(t,l,3,[M,g===xr?void 0:f&&g[0]===xr?[]:g,p]),g=M)}else _.run()};v.allowRecurse=!!t;let T;i==="sync"?T=v:i==="post"?T=()=>ke(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),T=()=>pi(v));const _=new ti(s,T);t?r?v():g=_.run():i==="post"?ke(_.run.bind(_),l&&l.suspense):_.run();const P=()=>{_.stop(),l&&l.scope&&Yn(l.scope.effects,_)};return m&&m.push(P),P}function Zc(e,t,r){const n=this.proxy,i=pe(e)?e.includes(".")?Ps(n,e):()=>n[e]:e.bind(n,n);let o;V(t)?o=t:(o=t.handler,r=t);const a=ue;Ht(this);const l=Ts(i,o.bind(n),r);return a?Ht(a):kt(),l}function Ps(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Bt(e,t){if(!ce(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ge(e))Bt(e.value,t);else if(H(e))for(let r=0;r<e.length;r++)Bt(e[r],t);else if(qo(e)||Lt(e))e.forEach(r=>{Bt(r,t)});else if(Xo(e))for(const r in e)Bt(e[r],t);return e}function nn(e){return V(e)?{setup:e,name:e.name}:e}const Ar=e=>!!e.type.__asyncLoader,Es=e=>e.type.__isKeepAlive;function el(e,t){Rs(e,"a",t)}function tl(e,t){Rs(e,"da",t)}function Rs(e,t,r=ue){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(on(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Es(i.parent.vnode)&&rl(n,t,r,i),i=i.parent}}function rl(e,t,r,n){const i=on(t,e,n,!0);ks(()=>{Yn(n[t],i)},r)}function on(e,t,r=ue,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Wt(),Ht(r);const l=He(t,r,e,a);return kt(),qt(),l});return n?i.unshift(o):i.push(o),o}}const pt=e=>(t,r=ue)=>(!vr||e==="sp")&&on(e,(...n)=>t(...n),r),nl=pt("bm"),xs=pt("m"),il=pt("bu"),ol=pt("u"),sl=pt("bum"),ks=pt("um"),al=pt("sp"),cl=pt("rtg"),ll=pt("rtc");function fl(e,t=ue){on("ec",e,t)}function bt(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const l=i[a];o&&(l.oldValue=o[a].value);let s=l.dir[n];s&&(Wt(),He(s,r,8,[e.el,l,e,t]),qt())}}const ul=Symbol();function Bp(e,t,r,n){let i;const o=r&&r[n];if(H(e)||pe(e)){i=new Array(e.length);for(let a=0,l=e.length;a<l;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(ce(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o&&o[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,s=a.length;l<s;l++){const c=a[l];i[l]=t(e[c],c,l,o&&o[l])}}else i=[];return r&&(r[n]=i),i}const On=e=>e?Ns(e)?vi(e)||e.proxy:On(e.parent):null,ar=Ee(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>On(e.parent),$root:e=>On(e.root),$emit:e=>e.emit,$options:e=>di(e),$forceUpdate:e=>e.f||(e.f=()=>pi(e.update)),$nextTick:e=>e.n||(e.n=ui.bind(e.proxy)),$watch:e=>Zc.bind(e)}),hn=(e,t)=>e!==ae&&!e.__isScriptSetup&&Q(e,t),pl={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:l,appContext:s}=e;let c;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(hn(n,t))return a[t]=1,n[t];if(i!==ae&&Q(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&Q(c,t))return a[t]=3,o[t];if(r!==ae&&Q(r,t))return a[t]=4,r[t];Dn&&(a[t]=0)}}const f=ar[t];let u,p;if(f)return t==="$attrs"&&Ie(e,"get",t),f(e);if((u=l.__cssModules)&&(u=u[t]))return u;if(r!==ae&&Q(r,t))return a[t]=4,r[t];if(p=s.config.globalProperties,Q(p,t))return p[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return hn(i,t)?(i[t]=r,!0):n!==ae&&Q(n,t)?(n[t]=r,!0):Q(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let l;return!!r[a]||e!==ae&&Q(e,a)||hn(t,a)||(l=o[0])&&Q(l,a)||Q(n,a)||Q(ar,a)||Q(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Q(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let Dn=!0;function dl(e){const t=di(e),r=e.proxy,n=e.ctx;Dn=!1,t.beforeCreate&&Li(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:l,provide:s,inject:c,created:f,beforeMount:u,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:T,beforeDestroy:_,beforeUnmount:P,destroyed:M,unmounted:w,render:G,renderTracked:q,renderTriggered:oe,errorCaptured:re,serverPrefetch:nt,expose:N,inheritAttrs:we,components:_e,directives:Je,filters:de}=t;if(c&&hl(c,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Y in a){const J=a[Y];V(J)&&(n[Y]=J.bind(r))}if(i){const Y=i.call(r,r);ce(Y)&&(e.data=Ot(Y))}if(Dn=!0,o)for(const Y in o){const J=o[Y],xe=V(J)?J.bind(r,r):V(J.get)?J.get.bind(r,r):Ge,We=!V(J)&&V(J.set)?J.set.bind(r):Ge,Te=De({get:xe,set:We});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>Te.value,set:he=>Te.value=he})}if(l)for(const Y in l)Os(l[Y],n,r,Y);if(s){const Y=V(s)?s.call(r):s;Reflect.ownKeys(Y).forEach(J=>{Ir(J,Y[J])})}f&&Li(f,e,"c");function se(Y,J){H(J)?J.forEach(xe=>Y(xe.bind(r))):J&&Y(J.bind(r))}if(se(nl,u),se(xs,p),se(il,m),se(ol,g),se(el,v),se(tl,T),se(fl,re),se(ll,q),se(cl,oe),se(sl,P),se(ks,w),se(al,nt),H(N))if(N.length){const Y=e.exposed||(e.exposed={});N.forEach(J=>{Object.defineProperty(Y,J,{get:()=>r[J],set:xe=>r[J]=xe})})}else e.exposed||(e.exposed={});G&&e.render===Ge&&(e.render=G),we!=null&&(e.inheritAttrs=we),_e&&(e.components=_e),Je&&(e.directives=Je)}function hl(e,t,r=Ge,n=!1){H(e)&&(e=Mn(e));for(const i in e){const o=e[i];let a;ce(o)?"default"in o?a=tt(o.from||i,o.default,!0):a=tt(o.from||i):a=tt(o),ge(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function Li(e,t,r){He(H(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Os(e,t,r,n){const i=n.includes(".")?Ps(r,n):()=>r[n];if(pe(e)){const o=t[e];V(o)&&Nt(i,o)}else if(V(e))Nt(i,e.bind(r));else if(ce(e))if(H(e))e.forEach(o=>Os(o,t,r,n));else{const o=V(e.handler)?e.handler.bind(r):t[e.handler];V(o)&&Nt(i,o,e)}}function di(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,l=o.get(t);let s;return l?s=l:!i.length&&!r&&!n?s=t:(s={},i.length&&i.forEach(c=>Gr(s,c,a,!0)),Gr(s,t,a)),ce(t)&&o.set(t,s),s}function Gr(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&Gr(e,o,r,!0),i&&i.forEach(a=>Gr(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const l=ml[a]||r&&r[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const ml={data:Fi,props:Pt,emits:Pt,methods:Pt,computed:Pt,beforeCreate:Pe,created:Pe,beforeMount:Pe,mounted:Pe,beforeUpdate:Pe,updated:Pe,beforeDestroy:Pe,beforeUnmount:Pe,destroyed:Pe,unmounted:Pe,activated:Pe,deactivated:Pe,errorCaptured:Pe,serverPrefetch:Pe,components:Pt,directives:Pt,watch:vl,provide:Fi,inject:gl};function Fi(e,t){return t?e?function(){return Ee(V(e)?e.call(this,this):e,V(t)?t.call(this,this):t)}:t:e}function gl(e,t){return Pt(Mn(e),Mn(t))}function Mn(e){if(H(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Pe(e,t){return e?[...new Set([].concat(e,t))]:t}function Pt(e,t){return e?Ee(Ee(Object.create(null),e),t):t}function vl(e,t){if(!e)return t;if(!t)return e;const r=Ee(Object.create(null),e);for(const n in t)r[n]=Pe(e[n],t[n]);return r}function yl(e,t,r,n=!1){const i={},o={};Nr(o,an,1),e.propsDefaults=Object.create(null),Ds(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:jc(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function _l(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,l=X(i),[s]=e.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let u=0;u<f.length;u++){let p=f[u];if(rn(e.emitsOptions,p))continue;const m=t[p];if(s)if(Q(o,p))m!==o[p]&&(o[p]=m,c=!0);else{const g=Ut(p);i[g]=In(s,l,g,m,e,!1)}else m!==o[p]&&(o[p]=m,c=!0)}}}else{Ds(e,t,i,o)&&(c=!0);let f;for(const u in l)(!t||!Q(t,u)&&((f=Mt(u))===u||!Q(t,f)))&&(s?r&&(r[u]!==void 0||r[f]!==void 0)&&(i[u]=In(s,l,u,void 0,e,!0)):delete i[u]);if(o!==l)for(const u in o)(!t||!Q(t,u))&&(delete o[u],c=!0)}c&&ut(e,"set","$attrs")}function Ds(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,l;if(t)for(let s in t){if(Mr(s))continue;const c=t[s];let f;i&&Q(i,f=Ut(s))?!o||!o.includes(f)?r[f]=c:(l||(l={}))[f]=c:rn(e.emitsOptions,s)||(!(s in n)||c!==n[s])&&(n[s]=c,a=!0)}if(o){const s=X(r),c=l||ae;for(let f=0;f<o.length;f++){const u=o[f];r[u]=In(i,s,u,c[u],e,!Q(c,u))}}return a}function In(e,t,r,n,i,o){const a=e[r];if(a!=null){const l=Q(a,"default");if(l&&n===void 0){const s=a.default;if(a.type!==Function&&V(s)){const{propsDefaults:c}=i;r in c?n=c[r]:(Ht(i),n=c[r]=s.call(null,t),kt())}else n=s}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===Mt(r))&&(n=!0))}return n}function Ms(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},l=[];let s=!1;if(!V(e)){const f=u=>{s=!0;const[p,m]=Ms(u,t,!0);Ee(a,p),m&&l.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!s)return ce(e)&&n.set(e,wt),wt;if(H(o))for(let f=0;f<o.length;f++){const u=Ut(o[f]);$i(u)&&(a[u]=ae)}else if(o)for(const f in o){const u=Ut(f);if($i(u)){const p=o[f],m=a[u]=H(p)||V(p)?{type:p}:Object.assign({},p);if(m){const g=zi(Boolean,m.type),v=zi(String,m.type);m[0]=g>-1,m[1]=v<0||g<v,(g>-1||Q(m,"default"))&&l.push(u)}}}const c=[a,l];return ce(e)&&n.set(e,c),c}function $i(e){return e[0]!=="$"}function Ni(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Ui(e,t){return Ni(e)===Ni(t)}function zi(e,t){return H(t)?t.findIndex(r=>Ui(r,e)):V(t)&&Ui(t,e)?0:-1}const Is=e=>e[0]==="_"||e==="$stable",hi=e=>H(e)?e.map(Xe):[Xe(e)],bl=(e,t,r)=>{if(t._n)return t;const n=Vc((...i)=>hi(t(...i)),r);return n._c=!1,n},As=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Is(i))continue;const o=e[i];if(V(o))t[i]=bl(i,o,n);else if(o!=null){const a=hi(o);t[i]=()=>a}}},js=(e,t)=>{const r=hi(t);e.slots.default=()=>r},Cl=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=X(t),Nr(t,"_",r)):As(t,e.slots={})}else e.slots={},t&&js(e,t);Nr(e.slots,an,1)},Sl=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=ae;if(n.shapeFlag&32){const l=t._;l?r&&l===1?o=!1:(Ee(i,t),!r&&l===1&&delete i._):(o=!t.$stable,As(t,i)),a=t}else t&&(js(e,t),a={default:1});if(o)for(const l in i)!Is(l)&&!(l in a)&&delete i[l]};function Bs(){return{app:null,config:{isNativeTag:Ya,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tl=0;function Pl(e,t){return function(n,i=null){V(n)||(n=Object.assign({},n)),i!=null&&!ce(i)&&(i=null);const o=Bs(),a=new Set;let l=!1;const s=o.app={_uid:Tl++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Vl,get config(){return o.config},set config(c){},use(c,...f){return a.has(c)||(c&&V(c.install)?(a.add(c),c.install(s,...f)):V(c)&&(a.add(c),c(s,...f))),s},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),s},component(c,f){return f?(o.components[c]=f,s):o.components[c]},directive(c,f){return f?(o.directives[c]=f,s):o.directives[c]},mount(c,f,u){if(!l){const p=Me(n,i);return p.appContext=o,f&&t?t(p,c):e(p,c,u),l=!0,s._container=c,c.__vue_app__=s,vi(p.component)||p.component.proxy}},unmount(){l&&(e(null,s._container),delete s._container.__vue_app__)},provide(c,f){return o.provides[c]=f,s}};return s}}function An(e,t,r,n,i=!1){if(H(e)){e.forEach((p,m)=>An(p,t&&(H(t)?t[m]:t),r,n,i));return}if(Ar(n)&&!i)return;const o=n.shapeFlag&4?vi(n.component)||n.component.proxy:n.el,a=i?null:o,{i:l,r:s}=e,c=t&&t.r,f=l.refs===ae?l.refs={}:l.refs,u=l.setupState;if(c!=null&&c!==s&&(pe(c)?(f[c]=null,Q(u,c)&&(u[c]=null)):ge(c)&&(c.value=null)),V(s))yt(s,l,12,[a,f]);else{const p=pe(s),m=ge(s);if(p||m){const g=()=>{if(e.f){const v=p?Q(u,s)?u[s]:f[s]:s.value;i?H(v)&&Yn(v,o):H(v)?v.includes(o)||v.push(o):p?(f[s]=[o],Q(u,s)&&(u[s]=f[s])):(s.value=[o],e.k&&(f[e.k]=s.value))}else p?(f[s]=a,Q(u,s)&&(u[s]=a)):m&&(s.value=a,e.k&&(f[e.k]=a))};a?(g.id=-1,ke(g,r)):g()}}}const ke=Xc;function El(e){return Rl(e)}function Rl(e,t){const r=ic();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:l,createComment:s,setText:c,setElementText:f,parentNode:u,nextSibling:p,setScopeId:m=Ge,insertStaticContent:g}=e,v=(d,h,y,b=null,S=null,x=null,I=!1,R=null,k=!!h.dynamicChildren)=>{if(d===h)return;d&&!Xt(d,h)&&(b=D(d),he(d,S,x,!0),d=null),h.patchFlag===-2&&(k=!1,h.dynamicChildren=null);const{type:E,ref:L,shapeFlag:j}=h;switch(E){case sn:T(d,h,y,b);break;case Dt:_(d,h,y,b);break;case mn:d==null&&P(h,y,b,I);break;case lt:_e(d,h,y,b,S,x,I,R,k);break;default:j&1?G(d,h,y,b,S,x,I,R,k):j&6?Je(d,h,y,b,S,x,I,R,k):(j&64||j&128)&&E.process(d,h,y,b,S,x,I,R,k,U)}L!=null&&S&&An(L,d&&d.ref,x,h||d,!h)},T=(d,h,y,b)=>{if(d==null)n(h.el=l(h.children),y,b);else{const S=h.el=d.el;h.children!==d.children&&c(S,h.children)}},_=(d,h,y,b)=>{d==null?n(h.el=s(h.children||""),y,b):h.el=d.el},P=(d,h,y,b)=>{[d.el,d.anchor]=g(d.children,h,y,b,d.el,d.anchor)},M=({el:d,anchor:h},y,b)=>{let S;for(;d&&d!==h;)S=p(d),n(d,y,b),d=S;n(h,y,b)},w=({el:d,anchor:h})=>{let y;for(;d&&d!==h;)y=p(d),i(d),d=y;i(h)},G=(d,h,y,b,S,x,I,R,k)=>{I=I||h.type==="svg",d==null?q(h,y,b,S,x,I,R,k):nt(d,h,S,x,I,R,k)},q=(d,h,y,b,S,x,I,R)=>{let k,E;const{type:L,props:j,shapeFlag:F,transition:z,dirs:W}=d;if(k=d.el=a(d.type,x,j&&j.is,j),F&8?f(k,d.children):F&16&&re(d.children,k,null,b,S,x&&L!=="foreignObject",I,R),W&&bt(d,null,b,"created"),oe(k,d,d.scopeId,I,b),j){for(const te in j)te!=="value"&&!Mr(te)&&o(k,te,null,j[te],x,d.children,b,S,O);"value"in j&&o(k,"value",null,j.value),(E=j.onVnodeBeforeMount)&&Ye(E,b,d)}W&&bt(d,null,b,"beforeMount");const ie=(!S||S&&!S.pendingBranch)&&z&&!z.persisted;ie&&z.beforeEnter(k),n(k,h,y),((E=j&&j.onVnodeMounted)||ie||W)&&ke(()=>{E&&Ye(E,b,d),ie&&z.enter(k),W&&bt(d,null,b,"mounted")},S)},oe=(d,h,y,b,S)=>{if(y&&m(d,y),b)for(let x=0;x<b.length;x++)m(d,b[x]);if(S){let x=S.subTree;if(h===x){const I=S.vnode;oe(d,I,I.scopeId,I.slotScopeIds,S.parent)}}},re=(d,h,y,b,S,x,I,R,k=0)=>{for(let E=k;E<d.length;E++){const L=d[E]=R?mt(d[E]):Xe(d[E]);v(null,L,h,y,b,S,x,I,R)}},nt=(d,h,y,b,S,x,I)=>{const R=h.el=d.el;let{patchFlag:k,dynamicChildren:E,dirs:L}=h;k|=d.patchFlag&16;const j=d.props||ae,F=h.props||ae;let z;y&&Ct(y,!1),(z=F.onVnodeBeforeUpdate)&&Ye(z,y,h,d),L&&bt(h,d,y,"beforeUpdate"),y&&Ct(y,!0);const W=S&&h.type!=="foreignObject";if(E?N(d.dynamicChildren,E,R,y,b,W,x):I||J(d,h,R,null,y,b,W,x,!1),k>0){if(k&16)we(R,h,j,F,y,b,S);else if(k&2&&j.class!==F.class&&o(R,"class",null,F.class,S),k&4&&o(R,"style",j.style,F.style,S),k&8){const ie=h.dynamicProps;for(let te=0;te<ie.length;te++){const fe=ie[te],Fe=j[fe],It=F[fe];(It!==Fe||fe==="value")&&o(R,fe,Fe,It,S,d.children,y,b,O)}}k&1&&d.children!==h.children&&f(R,h.children)}else!I&&E==null&&we(R,h,j,F,y,b,S);((z=F.onVnodeUpdated)||L)&&ke(()=>{z&&Ye(z,y,h,d),L&&bt(h,d,y,"updated")},b)},N=(d,h,y,b,S,x,I)=>{for(let R=0;R<h.length;R++){const k=d[R],E=h[R],L=k.el&&(k.type===lt||!Xt(k,E)||k.shapeFlag&70)?u(k.el):y;v(k,E,L,null,b,S,x,I,!0)}},we=(d,h,y,b,S,x,I)=>{if(y!==b){if(y!==ae)for(const R in y)!Mr(R)&&!(R in b)&&o(d,R,y[R],null,I,h.children,S,x,O);for(const R in b){if(Mr(R))continue;const k=b[R],E=y[R];k!==E&&R!=="value"&&o(d,R,E,k,I,h.children,S,x,O)}"value"in b&&o(d,"value",y.value,b.value)}},_e=(d,h,y,b,S,x,I,R,k)=>{const E=h.el=d?d.el:l(""),L=h.anchor=d?d.anchor:l("");let{patchFlag:j,dynamicChildren:F,slotScopeIds:z}=h;z&&(R=R?R.concat(z):z),d==null?(n(E,y,b),n(L,y,b),re(h.children,y,L,S,x,I,R,k)):j>0&&j&64&&F&&d.dynamicChildren?(N(d.dynamicChildren,F,y,S,x,I,R),(h.key!=null||S&&h===S.subTree)&&ws(d,h,!0)):J(d,h,y,L,S,x,I,R,k)},Je=(d,h,y,b,S,x,I,R,k)=>{h.slotScopeIds=R,d==null?h.shapeFlag&512?S.ctx.activate(h,y,b,I,k):de(h,y,b,S,x,I,k):it(d,h,k)},de=(d,h,y,b,S,x,I)=>{const R=d.component=Ll(d,b,S);if(Es(d)&&(R.ctx.renderer=U),$l(R),R.asyncDep){if(S&&S.registerDep(R,se),!d.el){const k=R.subTree=Me(Dt);_(null,k,h,y)}return}se(R,d,h,y,S,x,I)},it=(d,h,y)=>{const b=h.component=d.component;if(qc(d,h,y))if(b.asyncDep&&!b.asyncResolved){Y(b,h,y);return}else b.next=h,zc(b.update),b.update();else h.el=d.el,b.vnode=h},se=(d,h,y,b,S,x,I)=>{const R=()=>{if(d.isMounted){let{next:L,bu:j,u:F,parent:z,vnode:W}=d,ie=L,te;Ct(d,!1),L?(L.el=W.el,Y(d,L,I)):L=W,j&&pn(j),(te=L.props&&L.props.onVnodeBeforeUpdate)&&Ye(te,z,L,W),Ct(d,!0);const fe=dn(d),Fe=d.subTree;d.subTree=fe,v(Fe,fe,u(Fe.el),D(Fe),d,S,x),L.el=fe.el,ie===null&&Qc(d,fe.el),F&&ke(F,S),(te=L.props&&L.props.onVnodeUpdated)&&ke(()=>Ye(te,z,L,W),S)}else{let L;const{el:j,props:F}=h,{bm:z,m:W,parent:ie}=d,te=Ar(h);if(Ct(d,!1),z&&pn(z),!te&&(L=F&&F.onVnodeBeforeMount)&&Ye(L,ie,h),Ct(d,!0),j&&K){const fe=()=>{d.subTree=dn(d),K(j,d.subTree,d,S,null)};te?h.type.__asyncLoader().then(()=>!d.isUnmounted&&fe()):fe()}else{const fe=d.subTree=dn(d);v(null,fe,y,b,d,S,x),h.el=fe.el}if(W&&ke(W,S),!te&&(L=F&&F.onVnodeMounted)){const fe=h;ke(()=>Ye(L,ie,fe),S)}(h.shapeFlag&256||ie&&Ar(ie.vnode)&&ie.vnode.shapeFlag&256)&&d.a&&ke(d.a,S),d.isMounted=!0,h=y=b=null}},k=d.effect=new ti(R,()=>pi(E),d.scope),E=d.update=()=>k.run();E.id=d.uid,Ct(d,!0),E()},Y=(d,h,y)=>{h.component=d;const b=d.vnode.props;d.vnode=h,d.next=null,_l(d,h.props,b,y),Sl(d,h.children,y),Wt(),Bi(),qt()},J=(d,h,y,b,S,x,I,R,k=!1)=>{const E=d&&d.children,L=d?d.shapeFlag:0,j=h.children,{patchFlag:F,shapeFlag:z}=h;if(F>0){if(F&128){We(E,j,y,b,S,x,I,R,k);return}else if(F&256){xe(E,j,y,b,S,x,I,R,k);return}}z&8?(L&16&&O(E,S,x),j!==E&&f(y,j)):L&16?z&16?We(E,j,y,b,S,x,I,R,k):O(E,S,x,!0):(L&8&&f(y,""),z&16&&re(j,y,b,S,x,I,R,k))},xe=(d,h,y,b,S,x,I,R,k)=>{d=d||wt,h=h||wt;const E=d.length,L=h.length,j=Math.min(E,L);let F;for(F=0;F<j;F++){const z=h[F]=k?mt(h[F]):Xe(h[F]);v(d[F],z,y,null,S,x,I,R,k)}E>L?O(d,S,x,!0,!1,j):re(h,y,b,S,x,I,R,k,j)},We=(d,h,y,b,S,x,I,R,k)=>{let E=0;const L=h.length;let j=d.length-1,F=L-1;for(;E<=j&&E<=F;){const z=d[E],W=h[E]=k?mt(h[E]):Xe(h[E]);if(Xt(z,W))v(z,W,y,null,S,x,I,R,k);else break;E++}for(;E<=j&&E<=F;){const z=d[j],W=h[F]=k?mt(h[F]):Xe(h[F]);if(Xt(z,W))v(z,W,y,null,S,x,I,R,k);else break;j--,F--}if(E>j){if(E<=F){const z=F+1,W=z<L?h[z].el:b;for(;E<=F;)v(null,h[E]=k?mt(h[E]):Xe(h[E]),y,W,S,x,I,R,k),E++}}else if(E>F)for(;E<=j;)he(d[E],S,x,!0),E++;else{const z=E,W=E,ie=new Map;for(E=W;E<=F;E++){const Ae=h[E]=k?mt(h[E]):Xe(h[E]);Ae.key!=null&&ie.set(Ae.key,E)}let te,fe=0;const Fe=F-W+1;let It=!1,Pi=0;const Yt=new Array(Fe);for(E=0;E<Fe;E++)Yt[E]=0;for(E=z;E<=j;E++){const Ae=d[E];if(fe>=Fe){he(Ae,S,x,!0);continue}let qe;if(Ae.key!=null)qe=ie.get(Ae.key);else for(te=W;te<=F;te++)if(Yt[te-W]===0&&Xt(Ae,h[te])){qe=te;break}qe===void 0?he(Ae,S,x,!0):(Yt[qe-W]=E+1,qe>=Pi?Pi=qe:It=!0,v(Ae,h[qe],y,null,S,x,I,R,k),fe++)}const Ei=It?xl(Yt):wt;for(te=Ei.length-1,E=Fe-1;E>=0;E--){const Ae=W+E,qe=h[Ae],Ri=Ae+1<L?h[Ae+1].el:b;Yt[E]===0?v(null,qe,y,Ri,S,x,I,R,k):It&&(te<0||E!==Ei[te]?Te(qe,y,Ri,2):te--)}}},Te=(d,h,y,b,S=null)=>{const{el:x,type:I,transition:R,children:k,shapeFlag:E}=d;if(E&6){Te(d.component.subTree,h,y,b);return}if(E&128){d.suspense.move(h,y,b);return}if(E&64){I.move(d,h,y,U);return}if(I===lt){n(x,h,y);for(let j=0;j<k.length;j++)Te(k[j],h,y,b);n(d.anchor,h,y);return}if(I===mn){M(d,h,y);return}if(b!==2&&E&1&&R)if(b===0)R.beforeEnter(x),n(x,h,y),ke(()=>R.enter(x),S);else{const{leave:j,delayLeave:F,afterLeave:z}=R,W=()=>n(x,h,y),ie=()=>{j(x,()=>{W(),z&&z()})};F?F(x,W,ie):ie()}else n(x,h,y)},he=(d,h,y,b=!1,S=!1)=>{const{type:x,props:I,ref:R,children:k,dynamicChildren:E,shapeFlag:L,patchFlag:j,dirs:F}=d;if(R!=null&&An(R,null,y,d,!0),L&256){h.ctx.deactivate(d);return}const z=L&1&&F,W=!Ar(d);let ie;if(W&&(ie=I&&I.onVnodeBeforeUnmount)&&Ye(ie,h,d),L&6)C(d.component,y,b);else{if(L&128){d.suspense.unmount(y,b);return}z&&bt(d,null,h,"beforeUnmount"),L&64?d.type.remove(d,h,y,S,U,b):E&&(x!==lt||j>0&&j&64)?O(E,h,y,!1,!0):(x===lt&&j&384||!S&&L&16)&&O(k,h,y),b&&ot(d)}(W&&(ie=I&&I.onVnodeUnmounted)||z)&&ke(()=>{ie&&Ye(ie,h,d),z&&bt(d,null,h,"unmounted")},y)},ot=d=>{const{type:h,el:y,anchor:b,transition:S}=d;if(h===lt){Le(y,b);return}if(h===mn){w(d);return}const x=()=>{i(y),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(d.shapeFlag&1&&S&&!S.persisted){const{leave:I,delayLeave:R}=S,k=()=>I(y,x);R?R(d.el,x,k):k()}else x()},Le=(d,h)=>{let y;for(;d!==h;)y=p(d),i(d),d=y;i(h)},C=(d,h,y)=>{const{bum:b,scope:S,update:x,subTree:I,um:R}=d;b&&pn(b),S.stop(),x&&(x.active=!1,he(I,d,h,y)),R&&ke(R,h),ke(()=>{d.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},O=(d,h,y,b=!1,S=!1,x=0)=>{for(let I=x;I<d.length;I++)he(d[I],h,y,b,S)},D=d=>d.shapeFlag&6?D(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el),B=(d,h,y)=>{d==null?h._vnode&&he(h._vnode,null,null,!0):v(h._vnode||null,d,h,null,null,null,y),Bi(),_s(),h._vnode=d},U={p:v,um:he,m:Te,r:ot,mt:de,mc:re,pc:J,pbc:N,n:D,o:e};let ne,K;return t&&([ne,K]=t(U)),{render:B,hydrate:ne,createApp:Pl(B,ne)}}function Ct({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function ws(e,t,r=!1){const n=e.children,i=t.children;if(H(n)&&H(i))for(let o=0;o<n.length;o++){const a=n[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=mt(i[o]),l.el=a.el),r||ws(a,l)),l.type===sn&&(l.el=a.el)}}function xl(e){const t=e.slice(),r=[0];let n,i,o,a,l;const s=e.length;for(n=0;n<s;n++){const c=e[n];if(c!==0){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)l=o+a>>1,e[r[l]]<c?o=l+1:a=l;c<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const kl=e=>e.__isTeleport,lt=Symbol(void 0),sn=Symbol(void 0),Dt=Symbol(void 0),mn=Symbol(void 0),cr=[];let ze=null;function mi(e=!1){cr.push(ze=e?null:[])}function Ol(){cr.pop(),ze=cr[cr.length-1]||null}let gr=1;function Gi(e){gr+=e}function Ls(e){return e.dynamicChildren=gr>0?ze||wt:null,Ol(),gr>0&&ze&&ze.push(e),e}function Fs(e,t,r,n,i,o){return Ls(Be(e,t,r,n,i,o,!0))}function Dl(e,t,r,n,i){return Ls(Me(e,t,r,n,i,!0))}function jn(e){return e?e.__v_isVNode===!0:!1}function Xt(e,t){return e.type===t.type&&e.key===t.key}const an="__vInternal",$s=({key:e})=>e??null,jr=({ref:e,ref_key:t,ref_for:r})=>e!=null?pe(e)||ge(e)||V(e)?{i:Ue,r:e,k:t,f:!!r}:e:null;function Be(e,t=null,r=null,n=0,i=null,o=e===lt?0:1,a=!1,l=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$s(t),ref:t&&jr(t),scopeId:Ss,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ue};return l?(gi(s,r),o&128&&e.normalize(s)):r&&(s.shapeFlag|=pe(r)?8:16),gr>0&&!a&&ze&&(s.patchFlag>0||o&6)&&s.patchFlag!==32&&ze.push(s),s}const Me=Ml;function Ml(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===ul)&&(e=Dt),jn(e)){const l=Gt(e,t,!0);return r&&gi(l,r),gr>0&&!o&&ze&&(l.shapeFlag&6?ze[ze.indexOf(e)]=l:ze.push(l)),l.patchFlag|=-2,l}if(Gl(e)&&(e=e.__vccOpts),t){t=Il(t);let{class:l,style:s}=t;l&&!pe(l)&&(t.class=qn(l)),ce(s)&&(ps(s)&&!H(s)&&(s=Ee({},s)),t.style=Wn(s))}const a=pe(e)?1:Yc(e)?128:kl(e)?64:ce(e)?4:V(e)?2:0;return Be(e,t,r,n,i,a,o,!0)}function Il(e){return e?ps(e)||an in e?Ee({},e):e:null}function Gt(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,l=t?jl(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&$s(l),ref:t&&t.ref?r&&i?H(i)?i.concat(jr(t)):[i,jr(t)]:jr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==lt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gt(e.ssContent),ssFallback:e.ssFallback&&Gt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Al(e=" ",t=0){return Me(sn,null,e,t)}function wp(e="",t=!1){return t?(mi(),Dl(Dt,null,e)):Me(Dt,null,e)}function Xe(e){return e==null||typeof e=="boolean"?Me(Dt):H(e)?Me(lt,null,e.slice()):typeof e=="object"?mt(e):Me(sn,null,String(e))}function mt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gt(e)}function gi(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(H(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),gi(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(an in t)?t._ctx=Ue:i===3&&Ue&&(Ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else V(t)?(t={default:t,_ctx:Ue},r=32):(t=String(t),n&64?(r=16,t=[Al(t)]):r=8);e.children=t,e.shapeFlag|=r}function jl(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=qn([t.class,n.class]));else if(i==="style")t.style=Wn([t.style,n.style]);else if(Yr(i)){const o=t[i],a=n[i];a&&o!==a&&!(H(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Ye(e,t,r,n=null){He(e,t,7,[r,n])}const Bl=Bs();let wl=0;function Ll(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||Bl,o={uid:wl++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new es(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ms(n,i),emitsOptions:Cs(n,i),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:n.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Kc.bind(null,o),e.ce&&e.ce(o),o}let ue=null;const Fl=()=>ue||Ue,Ht=e=>{ue=e,e.scope.on()},kt=()=>{ue&&ue.scope.off(),ue=null};function Ns(e){return e.vnode.shapeFlag&4}let vr=!1;function $l(e,t=!1){vr=t;const{props:r,children:n}=e.vnode,i=Ns(e);yl(e,r,i,t),Cl(e,n);const o=i?Nl(e,t):void 0;return vr=!1,o}function Nl(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=ai(new Proxy(e.ctx,pl));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?zl(e):null;Ht(e),Wt();const o=yt(n,e,0,[e.props,i]);if(qt(),kt(),Qo(o)){if(o.then(kt,kt),t)return o.then(a=>{Hi(e,a,t)}).catch(a=>{tn(a,e,0)});e.asyncDep=o}else Hi(e,o,t)}else Us(e,t)}function Hi(e,t,r){V(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ce(t)&&(e.setupState=ms(t)),Us(e,r)}let Ki;function Us(e,t,r){const n=e.type;if(!e.render){if(!t&&Ki&&!n.render){const i=n.template||di(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:l,compilerOptions:s}=n,c=Ee(Ee({isCustomElement:o,delimiters:l},a),s);n.render=Ki(i,c)}}e.render=n.render||Ge}Ht(e),Wt(),dl(e),qt(),kt()}function Ul(e){return new Proxy(e.attrs,{get(t,r){return Ie(e,"get","$attrs"),t[r]}})}function zl(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=Ul(e))},slots:e.slots,emit:e.emit,expose:t}}function vi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ms(ai(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in ar)return ar[r](e)},has(t,r){return r in t||r in ar}}))}function Gl(e){return V(e)&&"__vccOpts"in e}const De=(e,t)=>$c(e,t,vr);function zs(e,t,r){const n=arguments.length;return n===2?ce(t)&&!H(t)?jn(t)?Me(e,null,[t]):Me(e,t):Me(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&jn(r)&&(r=[r]),Me(e,t,r))}const Hl=Symbol(""),Kl=()=>tt(Hl),Vl="3.2.47",Jl="http://www.w3.org/2000/svg",Rt=typeof document<"u"?document:null,Vi=Rt&&Rt.createElement("template"),Wl={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Rt.createElementNS(Jl,e):Rt.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Rt.createTextNode(e),createComment:e=>Rt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{Vi.innerHTML=n?`<svg>${e}</svg>`:e;const l=Vi.content;if(n){const s=l.firstChild;for(;s.firstChild;)l.appendChild(s.firstChild);l.removeChild(s)}t.insertBefore(l,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function ql(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Ql(e,t,r){const n=e.style,i=pe(r);if(r&&!i){if(t&&!pe(t))for(const o in t)r[o]==null&&Bn(n,o,"");for(const o in r)Bn(n,o,r[o])}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const Ji=/\s*!important$/;function Bn(e,t,r){if(H(r))r.forEach(n=>Bn(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Yl(e,t);Ji.test(r)?e.setProperty(Mt(n),r.replace(Ji,""),"important"):e[n]=r}}const Wi=["Webkit","Moz","ms"],gn={};function Yl(e,t){const r=gn[t];if(r)return r;let n=Ut(t);if(n!=="filter"&&n in e)return gn[t]=n;n=Zo(n);for(let i=0;i<Wi.length;i++){const o=Wi[i]+n;if(o in e)return gn[t]=o}return t}const qi="http://www.w3.org/1999/xlink";function Xl(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(qi,t.slice(6,t.length)):e.setAttributeNS(qi,t,r);else{const o=Qa(t);r==null||o&&!Jo(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function Zl(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const s=r??"";(e.value!==s||e.tagName==="OPTION")&&(e.value=s),r==null&&e.removeAttribute(t);return}let l=!1;if(r===""||r==null){const s=typeof e[t];s==="boolean"?r=Jo(r):r==null&&s==="string"?(r="",l=!0):s==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function ef(e,t,r,n){e.addEventListener(t,r,n)}function tf(e,t,r,n){e.removeEventListener(t,r,n)}function rf(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[l,s]=nf(t);if(n){const c=o[t]=af(n,i);ef(e,l,c,s)}else a&&(tf(e,l,a,s),o[t]=void 0)}}const Qi=/(?:Once|Passive|Capture)$/;function nf(e){let t;if(Qi.test(e)){t={};let n;for(;n=e.match(Qi);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mt(e.slice(2)),t]}let vn=0;const of=Promise.resolve(),sf=()=>vn||(of.then(()=>vn=0),vn=Date.now());function af(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;He(cf(n,r.value),t,5,[n])};return r.value=e,r.attached=sf(),r}function cf(e,t){if(H(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Yi=/^on[a-z]/,lf=(e,t,r,n,i=!1,o,a,l,s)=>{t==="class"?ql(e,n,i):t==="style"?Ql(e,r,n):Yr(t)?Qn(t)||rf(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ff(e,t,n,i))?Zl(e,t,n,o,a,l,s):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Xl(e,t,n,i))};function ff(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Yi.test(t)&&V(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Yi.test(t)&&pe(r)?!1:t in e}const uf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pf=(e,t)=>r=>{if(!("key"in r))return;const n=Mt(r.key);if(t.some(i=>i===n||uf[i]===n))return e(r)},df=Ee({patchProp:lf},Wl);let Xi;function hf(){return Xi||(Xi=El(df))}const mf=(...e)=>{const t=hf().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=gf(n);if(!i)return;const o=t._component;!V(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function gf(e){return pe(e)?document.querySelector(e):e}var vf=!1;/*!
  * pinia v2.0.33
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const yf=Symbol();var Zi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zi||(Zi={}));function _f(){const e=oc(!0),t=e.run(()=>Ke({}));let r=[],n=[];const i=ai({install(o){i._a=o,o.provide(yf,i),o.config.globalProperties.$pinia=i,n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!vf?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return i}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const jt=typeof window<"u";function bf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ee=Object.assign;function yn(e,t){const r={};for(const n in t){const i=t[n];r[n]=Ve(i)?i.map(e):e(i)}return r}const lr=()=>{},Ve=Array.isArray,Cf=/\/$/,Sf=e=>e.replace(Cf,"");function _n(e,t,r="/"){let n,i={},o="",a="";const l=t.indexOf("#");let s=t.indexOf("?");return l<s&&l>=0&&(s=-1),s>-1&&(n=t.slice(0,s),o=t.slice(s+1,l>-1?l:t.length),i=e(o)),l>-1&&(n=n||t.slice(0,l),a=t.slice(l,t.length)),n=Rf(n??t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function Tf(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function eo(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Pf(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Kt(t.matched[n],r.matched[i])&&Gs(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Kt(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Gs(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!Ef(e[r],t[r]))return!1;return!0}function Ef(e,t){return Ve(e)?to(e,t):Ve(t)?to(t,e):e===t}function to(e,t){return Ve(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function Rf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var yr;(function(e){e.pop="pop",e.push="push"})(yr||(yr={}));var fr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fr||(fr={}));function xf(e){if(!e)if(jt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Sf(e)}const kf=/^[^#]+#/;function Of(e,t){return e.replace(kf,"#")+t}function Df(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const cn=()=>({left:window.pageXOffset,top:window.pageYOffset});function Mf(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=Df(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ro(e,t){return(history.state?history.state.position-t:-1)+e}const wn=new Map;function If(e,t){wn.set(e,t)}function Af(e){const t=wn.get(e);return wn.delete(e),t}let jf=()=>location.protocol+"//"+location.host;function Hs(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let l=i.includes(e.slice(o))?e.slice(o).length:1,s=i.slice(l);return s[0]!=="/"&&(s="/"+s),eo(s,"")}return eo(r,e)+n+i}function Bf(e,t,r,n){let i=[],o=[],a=null;const l=({state:p})=>{const m=Hs(e,location),g=r.value,v=t.value;let T=0;if(p){if(r.value=m,t.value=p,a&&a===g){a=null;return}T=v?p.position-v.position:0}else n(m);i.forEach(_=>{_(r.value,g,{delta:T,type:yr.pop,direction:T?T>0?fr.forward:fr.back:fr.unknown})})};function s(){a=r.value}function c(p){i.push(p);const m=()=>{const g=i.indexOf(p);g>-1&&i.splice(g,1)};return o.push(m),m}function f(){const{history:p}=window;p.state&&p.replaceState(ee({},p.state,{scroll:cn()}),"")}function u(){for(const p of o)p();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",f),{pauseListeners:s,listen:c,destroy:u}}function no(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?cn():null}}function wf(e){const{history:t,location:r}=window,n={value:Hs(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(s,c,f){const u=e.indexOf("#"),p=u>-1?(r.host&&document.querySelector("base")?e:e.slice(u))+s:jf()+e+s;try{t[f?"replaceState":"pushState"](c,"",p),i.value=c}catch(m){console.error(m),r[f?"replace":"assign"](p)}}function a(s,c){const f=ee({},t.state,no(i.value.back,s,i.value.forward,!0),c,{position:i.value.position});o(s,f,!0),n.value=s}function l(s,c){const f=ee({},i.value,t.state,{forward:s,scroll:cn()});o(f.current,f,!0);const u=ee({},no(n.value,s,null),{position:f.position+1},c);o(s,u,!1),n.value=s}return{location:n,state:i,push:l,replace:a}}function Lf(e){e=xf(e);const t=wf(e),r=Bf(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=ee({location:"",base:e,go:n,createHref:Of.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Ff(e){return typeof e=="string"||e&&typeof e=="object"}function Ks(e){return typeof e=="string"||typeof e=="symbol"}const ht={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Vs=Symbol("");var io;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(io||(io={}));function Vt(e,t){return ee(new Error,{type:e,[Vs]:!0},t)}function st(e,t){return e instanceof Error&&Vs in e&&(t==null||!!(e.type&t))}const oo="[^/]+?",$f={sensitive:!1,strict:!1,start:!0,end:!0},Nf=/[.+*?^${}()[\]/\\]/g;function Uf(e,t){const r=ee({},$f,t),n=[];let i=r.start?"^":"";const o=[];for(const c of e){const f=c.length?[]:[90];r.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const p=c[u];let m=40+(r.sensitive?.25:0);if(p.type===0)u||(i+="/"),i+=p.value.replace(Nf,"\\$&"),m+=40;else if(p.type===1){const{value:g,repeatable:v,optional:T,regexp:_}=p;o.push({name:g,repeatable:v,optional:T});const P=_||oo;if(P!==oo){m+=10;try{new RegExp(`(${P})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${P}): `+w.message)}}let M=v?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;u||(M=T&&c.length<2?`(?:/${M})`:"/"+M),T&&(M+="?"),i+=M,m+=20,T&&(m+=-8),v&&(m+=-20),P===".*"&&(m+=-50)}f.push(m)}n.push(f)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function l(c){const f=c.match(a),u={};if(!f)return null;for(let p=1;p<f.length;p++){const m=f[p]||"",g=o[p-1];u[g.name]=m&&g.repeatable?m.split("/"):m}return u}function s(c){let f="",u=!1;for(const p of e){(!u||!f.endsWith("/"))&&(f+="/"),u=!1;for(const m of p)if(m.type===0)f+=m.value;else if(m.type===1){const{value:g,repeatable:v,optional:T}=m,_=g in c?c[g]:"";if(Ve(_)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const P=Ve(_)?_.join("/"):_;if(!P)if(T)p.length<2&&(f.endsWith("/")?f=f.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);f+=P}}return f||"/"}return{re:a,score:n,keys:o,parse:l,stringify:s}}function zf(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Gf(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=zf(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(so(n))return 1;if(so(i))return-1}return i.length-n.length}function so(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Hf={type:0,value:""},Kf=/[a-zA-Z0-9_]/;function Vf(e){if(!e)return[[]];if(e==="/")return[[Hf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${r})/"${c}": ${m}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let l=0,s,c="",f="";function u(){c&&(r===0?o.push({type:0,value:c}):r===1||r===2||r===3?(o.length>1&&(s==="*"||s==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:f,repeatable:s==="*"||s==="+",optional:s==="*"||s==="?"})):t("Invalid state to consume buffer"),c="")}function p(){c+=s}for(;l<e.length;){if(s=e[l++],s==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:s==="/"?(c&&u(),a()):s===":"?(u(),r=1):p();break;case 4:p(),r=n;break;case 1:s==="("?r=2:Kf.test(s)?p():(u(),r=0,s!=="*"&&s!=="?"&&s!=="+"&&l--);break;case 2:s===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+s:r=3:f+=s;break;case 3:u(),r=0,s!=="*"&&s!=="?"&&s!=="+"&&l--,f="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${c}"`),u(),a(),i}function Jf(e,t,r){const n=Uf(Vf(e.path),r),i=ee(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Wf(e,t){const r=[],n=new Map;t=lo({strict:!1,end:!0,sensitive:!1},t);function i(f){return n.get(f)}function o(f,u,p){const m=!p,g=qf(f);g.aliasOf=p&&p.record;const v=lo(t,f),T=[g];if("alias"in f){const M=typeof f.alias=="string"?[f.alias]:f.alias;for(const w of M)T.push(ee({},g,{components:p?p.record.components:g.components,path:w,aliasOf:p?p.record:g}))}let _,P;for(const M of T){const{path:w}=M;if(u&&w[0]!=="/"){const G=u.record.path,q=G[G.length-1]==="/"?"":"/";M.path=u.record.path+(w&&q+w)}if(_=Jf(M,u,v),p?p.alias.push(_):(P=P||_,P!==_&&P.alias.push(_),m&&f.name&&!co(_)&&a(f.name)),g.children){const G=g.children;for(let q=0;q<G.length;q++)o(G[q],_,p&&p.children[q])}p=p||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&s(_)}return P?()=>{a(P)}:lr}function a(f){if(Ks(f)){const u=n.get(f);u&&(n.delete(f),r.splice(r.indexOf(u),1),u.children.forEach(a),u.alias.forEach(a))}else{const u=r.indexOf(f);u>-1&&(r.splice(u,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return r}function s(f){let u=0;for(;u<r.length&&Gf(f,r[u])>=0&&(f.record.path!==r[u].record.path||!Js(f,r[u]));)u++;r.splice(u,0,f),f.record.name&&!co(f)&&n.set(f.record.name,f)}function c(f,u){let p,m={},g,v;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw Vt(1,{location:f});v=p.record.name,m=ee(ao(u.params,p.keys.filter(P=>!P.optional).map(P=>P.name)),f.params&&ao(f.params,p.keys.map(P=>P.name))),g=p.stringify(m)}else if("path"in f)g=f.path,p=r.find(P=>P.re.test(g)),p&&(m=p.parse(g),v=p.record.name);else{if(p=u.name?n.get(u.name):r.find(P=>P.re.test(u.path)),!p)throw Vt(1,{location:f,currentLocation:u});v=p.record.name,m=ee({},u.params,f.params),g=p.stringify(m)}const T=[];let _=p;for(;_;)T.unshift(_.record),_=_.parent;return{name:v,path:g,params:m,matched:T,meta:Yf(T)}}return e.forEach(f=>o(f)),{addRoute:o,resolve:c,removeRoute:a,getRoutes:l,getRecordMatcher:i}}function ao(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function qf(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Qf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Qf(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function co(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Yf(e){return e.reduce((t,r)=>ee(t,r.meta),{})}function lo(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function Js(e,t){return t.children.some(r=>r===e||Js(e,r))}const Ws=/#/g,Xf=/&/g,Zf=/\//g,eu=/=/g,tu=/\?/g,qs=/\+/g,ru=/%5B/g,nu=/%5D/g,Qs=/%5E/g,iu=/%60/g,Ys=/%7B/g,ou=/%7C/g,Xs=/%7D/g,su=/%20/g;function yi(e){return encodeURI(""+e).replace(ou,"|").replace(ru,"[").replace(nu,"]")}function au(e){return yi(e).replace(Ys,"{").replace(Xs,"}").replace(Qs,"^")}function Ln(e){return yi(e).replace(qs,"%2B").replace(su,"+").replace(Ws,"%23").replace(Xf,"%26").replace(iu,"`").replace(Ys,"{").replace(Xs,"}").replace(Qs,"^")}function cu(e){return Ln(e).replace(eu,"%3D")}function lu(e){return yi(e).replace(Ws,"%23").replace(tu,"%3F")}function fu(e){return e==null?"":lu(e).replace(Zf,"%2F")}function Hr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function uu(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(qs," "),a=o.indexOf("="),l=Hr(a<0?o:o.slice(0,a)),s=a<0?null:Hr(o.slice(a+1));if(l in t){let c=t[l];Ve(c)||(c=t[l]=[c]),c.push(s)}else t[l]=s}return t}function fo(e){let t="";for(let r in e){const n=e[r];if(r=cu(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Ve(n)?n.map(o=>o&&Ln(o)):[n&&Ln(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function pu(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Ve(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const du=Symbol(""),uo=Symbol(""),_i=Symbol(""),Zs=Symbol(""),Fn=Symbol("");function Zt(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function gt(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const s=u=>{u===!1?l(Vt(4,{from:r,to:t})):u instanceof Error?l(u):Ff(u)?l(Vt(2,{from:t,to:u})):(o&&n.enterCallbacks[i]===o&&typeof u=="function"&&o.push(u),a())},c=e.call(n&&n.instances[i],t,r,s);let f=Promise.resolve(c);e.length<3&&(f=f.then(s)),f.catch(u=>l(u))})}function bn(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(hu(l)){const c=(l.__vccOpts||l)[t];c&&i.push(gt(c,r,n,o,a))}else{let s=l();i.push(()=>s.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=bf(c)?c.default:c;o.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&gt(p,r,n,o,a)()}))}}return i}function hu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function po(e){const t=tt(_i),r=tt(Zs),n=De(()=>t.resolve(et(e.to))),i=De(()=>{const{matched:s}=n.value,{length:c}=s,f=s[c-1],u=r.matched;if(!f||!u.length)return-1;const p=u.findIndex(Kt.bind(null,f));if(p>-1)return p;const m=ho(s[c-2]);return c>1&&ho(f)===m&&u[u.length-1].path!==m?u.findIndex(Kt.bind(null,s[c-2])):p}),o=De(()=>i.value>-1&&yu(r.params,n.value.params)),a=De(()=>i.value>-1&&i.value===r.matched.length-1&&Gs(r.params,n.value.params));function l(s={}){return vu(s)?t[et(e.replace)?"replace":"push"](et(e.to)).catch(lr):Promise.resolve()}return{route:n,href:De(()=>n.value.href),isActive:o,isExactActive:a,navigate:l}}const mu=nn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:po,setup(e,{slots:t}){const r=Ot(po(e)),{options:n}=tt(_i),i=De(()=>({[mo(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[mo(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:zs("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),gu=mu;function vu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function yu(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Ve(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function ho(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const mo=(e,t,r)=>e??t??r,_u=nn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=tt(Fn),i=De(()=>e.route||n.value),o=tt(uo,0),a=De(()=>{let c=et(o);const{matched:f}=i.value;let u;for(;(u=f[c])&&!u.components;)c++;return c}),l=De(()=>i.value.matched[a.value]);Ir(uo,De(()=>a.value+1)),Ir(du,l),Ir(Fn,i);const s=Ke();return Nt(()=>[s.value,l.value,e.name],([c,f,u],[p,m,g])=>{f&&(f.instances[u]=c,m&&m!==f&&c&&c===p&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),c&&f&&(!m||!Kt(f,m)||!p)&&(f.enterCallbacks[u]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=i.value,f=e.name,u=l.value,p=u&&u.components[f];if(!p)return go(r.default,{Component:p,route:c});const m=u.props[f],g=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=zs(p,ee({},g,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(u.instances[f]=null)},ref:s}));return go(r.default,{Component:T,route:c})||T}}});function go(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const ea=_u;function bu(e){const t=Wf(e.routes,e),r=e.parseQuery||uu,n=e.stringifyQuery||fo,i=e.history,o=Zt(),a=Zt(),l=Zt(),s=Bc(ht);let c=ht;jt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=yn.bind(null,C=>""+C),u=yn.bind(null,fu),p=yn.bind(null,Hr);function m(C,O){let D,B;return Ks(C)?(D=t.getRecordMatcher(C),B=O):B=C,t.addRoute(B,D)}function g(C){const O=t.getRecordMatcher(C);O&&t.removeRoute(O)}function v(){return t.getRoutes().map(C=>C.record)}function T(C){return!!t.getRecordMatcher(C)}function _(C,O){if(O=ee({},O||s.value),typeof C=="string"){const d=_n(r,C,O.path),h=t.resolve({path:d.path},O),y=i.createHref(d.fullPath);return ee(d,h,{params:p(h.params),hash:Hr(d.hash),redirectedFrom:void 0,href:y})}let D;if("path"in C)D=ee({},C,{path:_n(r,C.path,O.path).path});else{const d=ee({},C.params);for(const h in d)d[h]==null&&delete d[h];D=ee({},C,{params:u(C.params)}),O.params=u(O.params)}const B=t.resolve(D,O),U=C.hash||"";B.params=f(p(B.params));const ne=Tf(n,ee({},C,{hash:au(U),path:B.path})),K=i.createHref(ne);return ee({fullPath:ne,hash:U,query:n===fo?pu(C.query):C.query||{}},B,{redirectedFrom:void 0,href:K})}function P(C){return typeof C=="string"?_n(r,C,s.value.path):ee({},C)}function M(C,O){if(c!==C)return Vt(8,{from:O,to:C})}function w(C){return oe(C)}function G(C){return w(ee(P(C),{replace:!0}))}function q(C){const O=C.matched[C.matched.length-1];if(O&&O.redirect){const{redirect:D}=O;let B=typeof D=="function"?D(C):D;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=P(B):{path:B},B.params={}),ee({query:C.query,hash:C.hash,params:"path"in B?{}:C.params},B)}}function oe(C,O){const D=c=_(C),B=s.value,U=C.state,ne=C.force,K=C.replace===!0,d=q(D);if(d)return oe(ee(P(d),{state:typeof d=="object"?ee({},U,d.state):U,force:ne,replace:K}),O||D);const h=D;h.redirectedFrom=O;let y;return!ne&&Pf(n,B,D)&&(y=Vt(16,{to:h,from:B}),We(B,B,!0,!1)),(y?Promise.resolve(y):nt(h,B)).catch(b=>st(b)?st(b,2)?b:xe(b):Y(b,h,B)).then(b=>{if(b){if(st(b,2))return oe(ee({replace:K},P(b.to),{state:typeof b.to=="object"?ee({},U,b.to.state):U,force:ne}),O||h)}else b=we(h,B,!0,K,U);return N(h,B,b),b})}function re(C,O){const D=M(C,O);return D?Promise.reject(D):Promise.resolve()}function nt(C,O){let D;const[B,U,ne]=Cu(C,O);D=bn(B.reverse(),"beforeRouteLeave",C,O);for(const d of B)d.leaveGuards.forEach(h=>{D.push(gt(h,C,O))});const K=re.bind(null,C,O);return D.push(K),At(D).then(()=>{D=[];for(const d of o.list())D.push(gt(d,C,O));return D.push(K),At(D)}).then(()=>{D=bn(U,"beforeRouteUpdate",C,O);for(const d of U)d.updateGuards.forEach(h=>{D.push(gt(h,C,O))});return D.push(K),At(D)}).then(()=>{D=[];for(const d of C.matched)if(d.beforeEnter&&!O.matched.includes(d))if(Ve(d.beforeEnter))for(const h of d.beforeEnter)D.push(gt(h,C,O));else D.push(gt(d.beforeEnter,C,O));return D.push(K),At(D)}).then(()=>(C.matched.forEach(d=>d.enterCallbacks={}),D=bn(ne,"beforeRouteEnter",C,O),D.push(K),At(D))).then(()=>{D=[];for(const d of a.list())D.push(gt(d,C,O));return D.push(K),At(D)}).catch(d=>st(d,8)?d:Promise.reject(d))}function N(C,O,D){for(const B of l.list())B(C,O,D)}function we(C,O,D,B,U){const ne=M(C,O);if(ne)return ne;const K=O===ht,d=jt?history.state:{};D&&(B||K?i.replace(C.fullPath,ee({scroll:K&&d&&d.scroll},U)):i.push(C.fullPath,U)),s.value=C,We(C,O,D,K),xe()}let _e;function Je(){_e||(_e=i.listen((C,O,D)=>{if(!Le.listening)return;const B=_(C),U=q(B);if(U){oe(ee(U,{replace:!0}),B).catch(lr);return}c=B;const ne=s.value;jt&&If(ro(ne.fullPath,D.delta),cn()),nt(B,ne).catch(K=>st(K,12)?K:st(K,2)?(oe(K.to,B).then(d=>{st(d,20)&&!D.delta&&D.type===yr.pop&&i.go(-1,!1)}).catch(lr),Promise.reject()):(D.delta&&i.go(-D.delta,!1),Y(K,B,ne))).then(K=>{K=K||we(B,ne,!1),K&&(D.delta&&!st(K,8)?i.go(-D.delta,!1):D.type===yr.pop&&st(K,20)&&i.go(-1,!1)),N(B,ne,K)}).catch(lr)}))}let de=Zt(),it=Zt(),se;function Y(C,O,D){xe(C);const B=it.list();return B.length?B.forEach(U=>U(C,O,D)):console.error(C),Promise.reject(C)}function J(){return se&&s.value!==ht?Promise.resolve():new Promise((C,O)=>{de.add([C,O])})}function xe(C){return se||(se=!C,Je(),de.list().forEach(([O,D])=>C?D(C):O()),de.reset()),C}function We(C,O,D,B){const{scrollBehavior:U}=e;if(!jt||!U)return Promise.resolve();const ne=!D&&Af(ro(C.fullPath,0))||(B||!D)&&history.state&&history.state.scroll||null;return ui().then(()=>U(C,O,ne)).then(K=>K&&Mf(K)).catch(K=>Y(K,C,O))}const Te=C=>i.go(C);let he;const ot=new Set,Le={currentRoute:s,listening:!0,addRoute:m,removeRoute:g,hasRoute:T,getRoutes:v,resolve:_,options:e,push:w,replace:G,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:o.add,beforeResolve:a.add,afterEach:l.add,onError:it.add,isReady:J,install(C){const O=this;C.component("RouterLink",gu),C.component("RouterView",ea),C.config.globalProperties.$router=O,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>et(s)}),jt&&!he&&s.value===ht&&(he=!0,w(i.location).catch(U=>{}));const D={};for(const U in ht)D[U]=De(()=>s.value[U]);C.provide(_i,O),C.provide(Zs,Ot(D)),C.provide(Fn,s);const B=C.unmount;ot.add(C),C.unmount=function(){ot.delete(C),ot.size<1&&(c=ht,_e&&_e(),_e=null,s.value=ht,he=!1,se=!1),B()}}};return Le}function At(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function Cu(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const l=t.matched[a];l&&(e.matched.find(c=>Kt(c,l))?n.push(l):r.push(l));const s=e.matched[a];s&&(t.matched.find(c=>Kt(c,s))||i.push(s))}return[r,n,i]}const Su={class:"h-full w-full"},Tu=nn({__name:"App",setup(e){return(t,r)=>(mi(),Fs("div",Su,[Me(et(ea))]))}}),Pu="modulepreload",Eu=function(e){return"/FOOP/"+e},vo={},Cn=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=Eu(o),o in vo)return;vo[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const u=i[f];if(u.href===o&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":Pu,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((f,u)=>{c.addEventListener("load",f),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};var yo;const Jt=typeof window<"u",Ru=e=>typeof e=="function",xu=e=>typeof e=="string",ta=()=>{};Jt&&((yo=window==null?void 0:window.navigator)!=null&&yo.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function br(e){return typeof e=="function"?e():et(e)}function ku(e){return e}function Kr(e){return ts()?(ac(e),!0):!1}function Ou(e,t=!0){Fl()?xs(e):t?e():ui(e)}function Lp(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:i=!1}=r;let o=null;const a=Ke(!1);function l(){o&&(clearInterval(o),o=null)}function s(){a.value=!1,l()}function c(){const f=br(t);f<=0||(a.value=!0,i&&e(),l(),o=setInterval(e,f))}if(n&&Jt&&c(),ge(t)||Ru(t)){const f=Nt(t,()=>{a.value&&Jt&&c()});Kr(f)}return Kr(s),{isActive:a,pause:s,resume:c}}function Du(e,t,r={}){const{immediate:n=!0}=r,i=Ke(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function s(...c){a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,e(...c)},br(t))}return n&&(i.value=!0,Jt&&s()),Kr(l),{isPending:oi(i),start:s,stop:l}}function Mu(e){var t;const r=br(e);return(t=r==null?void 0:r.$el)!=null?t:r}const ra=Jt?window:void 0,Iu=Jt?window.navigator:void 0;function nr(...e){let t,r,n,i;if(xu(e[0])||Array.isArray(e[0])?([r,n,i]=e,t=ra):[t,r,n,i]=e,!t)return ta;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const o=[],a=()=>{o.forEach(f=>f()),o.length=0},l=(f,u,p,m)=>(f.addEventListener(u,p,m),()=>f.removeEventListener(u,p,m)),s=Nt(()=>[Mu(t),br(i)],([f,u])=>{a(),f&&o.push(...r.flatMap(p=>n.map(m=>l(f,p,m,u))))},{immediate:!0,flush:"post"}),c=()=>{s(),a()};return Kr(c),c}function Au(e,t=!1){const r=Ke(),n=()=>r.value=!!e();return n(),Ou(n,t),r}function ju(e={}){const{navigator:t=Iu,read:r=!1,source:n,copiedDuring:i=1500,legacy:o=!1}=e,a=["copy","cut"],l=Au(()=>t&&"clipboard"in t),s=De(()=>l.value||o),c=Ke(""),f=Ke(!1),u=Du(()=>f.value=!1,i);function p(){l.value?t.clipboard.readText().then(T=>{c.value=T}):c.value=v()}if(s.value&&r)for(const T of a)nr(T,p);async function m(T=br(n)){s.value&&T!=null&&(l.value?await t.clipboard.writeText(T):g(T),c.value=T,f.value=!0,u.start())}function g(T){const _=document.createElement("textarea");_.value=T??"",_.style.position="absolute",_.style.opacity="0",document.body.appendChild(_),_.select(),document.execCommand("copy"),_.remove()}function v(){var T,_,P;return(P=(_=(T=document==null?void 0:document.getSelection)==null?void 0:T.call(document))==null?void 0:_.toString())!=null?P:""}return{isSupported:s,text:c,copied:f,copy:m}}const _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bo="__vueuse_ssr_handlers__";_o[bo]=_o[bo]||{};const Bu={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Fp(e={}){const{reactive:t=!1,target:r=ra,aliasMap:n=Bu,passive:i=!0,onEventFired:o=ta}=e,a=Ot(new Set),l={toJSON(){return{}},current:a},s=t?Ot(l):l,c=new Set,f=new Set;function u(v,T){v in s&&(t?s[v]=T:s[v].value=T)}function p(){a.clear();for(const v of f)u(v,!1)}function m(v,T){var _,P;const M=(_=v.key)==null?void 0:_.toLowerCase(),G=[(P=v.code)==null?void 0:P.toLowerCase(),M].filter(Boolean);M&&(T?a.add(M):a.delete(M));for(const q of G)f.add(q),u(q,T);M==="meta"&&!T?(c.forEach(q=>{a.delete(q),u(q,!1)}),c.clear()):typeof v.getModifierState=="function"&&v.getModifierState("Meta")&&T&&[...a,...G].forEach(q=>c.add(q))}nr(r,"keydown",v=>(m(v,!0),o(v)),{passive:i}),nr(r,"keyup",v=>(m(v,!1),o(v)),{passive:i}),nr("blur",p,{passive:!0}),nr("focus",p,{passive:!0});const g=new Proxy(s,{get(v,T,_){if(typeof T!="string")return Reflect.get(v,T,_);if(T=T.toLowerCase(),T in n&&(T=n[T]),!(T in s))if(/[+_-]/.test(T)){const M=T.split(/[+_-]/g).map(w=>w.trim());s[T]=De(()=>M.every(w=>et(g[w])))}else s[T]=Ke(!1);const P=Reflect.get(v,T,_);return t?et(P):P}});return g}var Co;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Co||(Co={}));var wu=Object.defineProperty,So=Object.getOwnPropertySymbols,Lu=Object.prototype.hasOwnProperty,Fu=Object.prototype.propertyIsEnumerable,To=(e,t,r)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$u=(e,t)=>{for(var r in t||(t={}))Lu.call(t,r)&&To(e,r,t[r]);if(So)for(var r of So(t))Fu.call(t,r)&&To(e,r,t[r]);return e};const Nu={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};$u({linear:ku},Nu);const Uu={class:"h-full w-full bg-blue-950 flex flex-wrap gap-8 justify-center items-center"},zu={class:"ui-card"},Gu=Be("h3",{class:"text-lg font-mono mb-3"},"Welcome",-1),Hu=Be("p",{class:"text-sm font-mono"},"You can either create a new game or join an existing game by pasting a URL or only the token into the below input field",-1),Ku=Be("hr",{class:"my-4 border-blue-950"},null,-1),Vu=Be("div",{class:"flex flex-wrap items-center justify-center my-4"},[Be("p",{class:"text-lg font-mono"},"OR")],-1),Ju=["onKeydown"],Wu=Be("h3",{class:"text-lg font-mono mb-3"},"Singleplayer",-1),qu=nn({__name:"HomeView",setup(e){const t=tt("peerService"),{copy:r}=ju(),n=c=>c.startsWith("http")?new URL(c).pathname.replace("/lobby/",""):c,i=async()=>{if(!await t.initSelf()){console.error("could not init peer service correctly, cannot create game");return}},o=async()=>{t!==void 0&&(await i(),r(window.location.protocol+"//"+window.location.host+"/lobby/"+t.peerId.value),Br.push(`/lobby/${t.peerId.value}`))},a=async()=>{Br.push("/game/single")},l=Ke(null),s=async()=>{if(l.value===null||t===void 0)return;await i();const c=n(l.value.value);t.connectToPeer(c)&&Br.push(`/lobby/${c}`)};return(c,f)=>(mi(),Fs("main",Uu,[Be("div",zu,[Gu,Hu,Ku,Be("button",{class:"bg-blue-950 text-white rounded-lg p-2 w-full",onClick:o},"Create Game"),Vu,Be("input",{type:"text",ref_key:"lobbyId",ref:l,id:"game-token",placeholder:"Game Token or URL",class:"w-full border border-blue-950 rounded-lg p-2",onKeydown:pf(s,["enter"])},null,40,Ju)]),Be("div",{class:"ui-card mt-8"},[Wu,Be("button",{class:"bg-blue-950 text-white rounded-lg p-2 w-full",onClick:a},"Start single player")])]))}});const Br=bu({history:Lf("/FOOP/"),routes:[{path:"/",name:"home",component:qu},{path:"/lobby/:lobbyId",name:"lobby",component:()=>Cn(()=>import("./LobbyView-ca8f6f49.js"),["assets/LobbyView-ca8f6f49.js","assets/game-d1c35298.js"])},{path:"/game/:gameId",name:"multiplayer_game",component:()=>Cn(()=>import("./GameView-7daca7fc.js"),[])},{path:"/game/single",name:"singleplayer_game",component:()=>Cn(()=>import("./SinglePlayerGameView-96891a80.js"),["assets/SinglePlayerGameView-96891a80.js","assets/game-d1c35298.js","assets/SinglePlayerGameView-a678669b.css"])}]});var Vr={},Qu={get exports(){return Vr},set exports(e){Vr=e}};(function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=t;var r=e.exports.BlobBuilder;typeof window<"u"&&(r=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function n(){this._pieces=[],this._parts=[]}n.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},n.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);t.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var i=new r,o=0,a=this._parts.length;o<a;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=n})(Qu);var Yu=Vr.BufferBuilder,Po=Vr.binaryFeatures,Xu={unpack:function(e){var t=new ve(e);return t.unpack()},pack:function(e){var t=new ye;t.pack(e);var r=t.getBuffer();return r}},Eo=Xu;function ve(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}ve.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}};ve.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};ve.prototype.unpack_uint16=function(){var e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t};ve.prototype.unpack_uint32=function(){var e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t};ve.prototype.unpack_uint64=function(){var e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t};ve.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-(1<<8)};ve.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-(1<<16)};ve.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};ve.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};ve.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t};ve.prototype.unpack_string=function(e){for(var t=this.read(e),r=0,n="",i,o;r<e;)i=t[r],i<128?(n+=String.fromCharCode(i),r++):(i^192)<32?(o=(i^192)<<6|t[r+1]&63,n+=String.fromCharCode(o),r+=2):(o=(i&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,n+=String.fromCharCode(o),r+=3);return this.index+=e,n};ve.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t};ve.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t};ve.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,n=e&8388607|8388608;return(t===0?1:-1)*n*Math.pow(2,r-23)};ve.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,n=(e>>20&2047)-1023,i=e&1048575|1048576,o=i*Math.pow(2,n-20)+t*Math.pow(2,n-52);return(r===0?1:-1)*o};ve.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")};function ye(){this.bufferBuilder=new Yu}ye.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};ye.prototype.pack=function(e){var t=typeof e;if(t==="string")this.pack_string(e);else if(t==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(t==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(t==="undefined")this.bufferBuilder.append(192);else if(t==="object")if(e===null)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(r==ArrayBuffer)Po.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)Po.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+r.toString()+'" not yet supported')}else throw new Error('Type "'+t+'" not yet supported');this.bufferBuilder.flush()};ye.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};ye.prototype.pack_string=function(e){var t=ep(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};ye.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(var r=0;r<t;r++)this.pack(e[r])};ye.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};ye.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),a=t<<31|r+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)};ye.prototype.pack_object=function(e){var t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))};ye.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};ye.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};ye.prototype.pack_uint32=function(e){var t=e&4294967295;this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};ye.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};ye.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};ye.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};ye.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};ye.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};function Zu(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function ep(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,Zu).length}let na=!0,ia=!0;function ir(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Qt(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,l){if(a!==t)return i.apply(this,arguments);const s=c=>{const f=r(c);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,s),i.apply(this,[a,s])};const o=n.removeEventListener;n.removeEventListener=function(a,l){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const s=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,s])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function tp(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(na=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function rp(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ia=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function bi(){if(typeof window=="object"){if(na)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ln(e,t){ia&&console.warn(e+" is deprecated, please use "+t+" instead.")}function np(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=ir(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=ir(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=ir(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=ir(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Ro(e){return Object.prototype.toString.call(e)==="[object Object]"}function oa(e){return Ro(e)?Object.keys(e).reduce(function(t,r){const n=Ro(e[r]),i=n?oa(e[r]):e[r],o=n&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[r]:i})},{}):e}function $n(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?$n(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{$n(e,e.get(i),r)})}))}function xo(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(l=>{l.type===n&&l.trackId===a.id&&$n(e,l,i)})}),i}const ko=bi;function sa(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const s={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const f=typeof l[c]=="object"?l[c]:{ideal:l[c]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const u=function(p,m){return p?p+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(f.ideal!==void 0){s.optional=s.optional||[];let p={};typeof f.ideal=="number"?(p[u("min",c)]=f.ideal,s.optional.push(p),p={},p[u("max",c)]=f.ideal,s.optional.push(p)):(p[u("",c)]=f.ideal,s.optional.push(p))}f.exact!==void 0&&typeof f.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",c)]=f.exact):["min","max"].forEach(p=>{f[p]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(p,c)]=f[p])})}),l.advanced&&(s.optional=(s.optional||[]).concat(l.advanced)),s},i=function(l,s){if(t.version>=61)return s(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(f,u,p){u in f&&!(p in f)&&(f[p]=f[u],delete f[u])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const f=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let u;if(c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(p=>{p=p.filter(g=>g.kind==="videoinput");let m=p.find(g=>u.some(v=>g.label.toLowerCase().includes(v)));return!m&&p.length&&u.includes("back")&&(m=p[p.length-1]),m&&(l.video.deviceId=c.exact?{exact:m.deviceId}:{ideal:m.deviceId}),l.video=n(l.video),ko("chrome: "+JSON.stringify(l)),s(l)})}l.video=n(l.video)}return ko("chrome: "+JSON.stringify(l)),s(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,s,c){i(l,f=>{r.webkitGetUserMedia(f,s,u=>{c&&c(o(u))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,c=>l(c).then(f=>{if(c.audio&&!f.getAudioTracks().length||c.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function ip(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(i=>{const o=n.video&&n.video.width,a=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(n.video.mandatory.maxWidth=o),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)})}}}function aa(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ca(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)}),n.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[n.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Qt(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function la(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,s){let c=i.apply(this,arguments);return c||(c=t(this,l),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const s=this._senders.indexOf(l);s!==-1&&this._senders.splice(s,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{const l=this._senders.find(s=>s.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function fa(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,i,o]=arguments;if(arguments.length>0&&typeof n=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof n!="function"))return t.apply(this,[]);const a=function(s){const c={};return s.result().forEach(u=>{const p={id:u.id,timestamp:u.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[u.type]||u.type};u.names().forEach(m=>{p[m]=u.stat(m)}),c[p.id]=p}),c},l=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){const s=function(c){i(l(a(c)))};return t.apply(this,[s,n])}return new Promise((s,c)=>{t.apply(this,[function(f){s(l(a(f)))},c])}).then(i,o)}}function ua(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>xo(a,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Qt(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>xo(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,o,a;return this.getSenders().forEach(l=>{l.track===n&&(i?a=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===n&&(o?a=!0:o=l),l.track===n)),a||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function pa(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(s)===-1&&this._shimmedLocalStreams[l.id].push(s):this._shimmedLocalStreams[l.id]=[l,s],s};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const s=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(s)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const s=this._shimmedLocalStreams[l].indexOf(a);s!==-1&&this._shimmedLocalStreams[l].splice(s,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function da(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return pa(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(u=>this._reverseStreams[u.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(u=>{if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const u=new e.MediaStream(f.getTracks());this._streams[f.id]=u,this._reverseStreams[u.id]=f,f=u}n.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(v=>v===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[u.id];if(g)g.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([f]);this._streams[u.id]=v,this._reverseStreams[v.id]=u,this.addStream(v)}return this.getSenders().find(v=>v.track===f)};function o(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:f.type,sdp:u})}function a(c,f){let u=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const m=c._reverseStreams[p],g=c._streams[m.id];u=u.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:f.type,sdp:u})}["createOffer","createAnswer"].forEach(function(c){const f=e.RTCPeerConnection.prototype[c],u={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[g=>{const v=o(this,g);p[0].apply(null,[v])},g=>{p[1]&&p[1].apply(null,g)},arguments[2]]):f.apply(this,arguments).then(g=>o(this,g))}};e.RTCPeerConnection.prototype[c]=u[c]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(v=>f.track===v)&&(p=this._streams[m])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Nn(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function ha(e,t){Qt(e,"negotiationneeded",r=>{const n=r.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const Oo=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ha,shimAddTrackRemoveTrack:da,shimAddTrackRemoveTrackWithNative:pa,shimGetDisplayMedia:ip,shimGetSendersWithDtmf:la,shimGetStats:fa,shimGetUserMedia:sa,shimMediaStream:aa,shimOnTrack:ca,shimPeerConnection:Nn,shimSenderReceiverGetStats:ua},Symbol.toStringTag,{value:"Module"}));function op(e,t){let r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(n=>{if(n&&(n.urls||n.url)){let i=n.urls||n.url;n.url&&!n.urls&&ln("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(a=>{if(a.indexOf("stun:")===0)return!1;const l=a.startsWith("turn")&&!a.startsWith("turn:[")&&a.includes("transport=udp");return l&&!r?(r=!0,!0):l&&!r}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}var Jr={},sp={get exports(){return Jr},set exports(e){Jr=e}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(function(n){return n.trim()})},t.splitSections=function(r){var n=r.split(`
m=`);return n.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},t.getDescription=function(r){var n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){var n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(function(i){return i.indexOf(n)===0})},t.parseCandidate=function(r){var n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");for(var i={foundation:n[0],component:parseInt(n[1],10),protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]},o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]=n[o+1];break}return i},t.writeCandidate=function(r){var n=[];n.push(r.foundation),n.push(r.component),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);var i=r.type;return n.push("typ"),n.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substr(14).split(" ")},t.parseRtpMap=function(r){var n=r.substr(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){var n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);var i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){var n=r.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},t.parseFmtp=function(r){for(var n={},i,o=r.substr(r.indexOf(" ")+1).split(";"),a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){var n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var o=[];Object.keys(r.parameters).forEach(function(a){r.parameters[a]?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){var n=r.substr(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){var n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(o){n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){var n=r.indexOf(" "),i={ssrc:parseInt(r.substr(7,n-7),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substr(n+1,o-n-1),i.value=r.substr(o+1)):i.attribute=r.substr(n+1),i},t.parseSsrcGroup=function(r){var n=r.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(function(i){return parseInt(i,10)})}},t.getMid=function(r){var n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(r){var n=r.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1]}},t.getDtlsParameters=function(r,n){var i=t.matchPrefix(r+n,"a=fingerprint:");return{role:"auto",fingerprints:i.map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){var i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){var n=r.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var n=r.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){var i=t.matchPrefix(r+n,"a=crypto:");return i.map(t.parseCryptoLine)},t.getIceParameters=function(r,n){var i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`},t.parseRtpParameters=function(r){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r),o=i[0].split(" "),a=3;a<o.length;a++){var l=o[a],s=t.matchPrefix(r,"a=rtpmap:"+l+" ")[0];if(s){var c=t.parseRtpMap(s),f=t.matchPrefix(r,"a=fmtp:"+l+" ");switch(c.parameters=f.length?t.parseFmtp(f[0]):{},c.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(r,"a=extmap:").forEach(function(u){n.headerExtensions.push(t.parseExtmap(u))}),n},t.writeRtpDescription=function(r,n){var i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map(function(a){return a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(function(a){i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});var o=0;return n.codecs.forEach(function(a){a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,n.headerExtensions&&n.headerExtensions.forEach(function(a){i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){var n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(r,"a=ssrc:").map(function(p){return t.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="cname"}),s=l.length>0&&l[0].ssrc,c,f=t.matchPrefix(r,"a=ssrc-group:FID").map(function(p){var m=p.substr(17).split(" ");return m.map(function(g){return parseInt(g,10)})});f.length>0&&f[0].length>1&&f[0][0]===s&&(c=f[0][1]),i.codecs.forEach(function(p){if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){var m={ssrc:s,codecPayloadType:parseInt(p.parameters.apt,10)};s&&c&&(m.rtx={ssrc:c}),n.push(m),o&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},n.push(m))}}),n.length===0&&s&&n.push({ssrc:s});var u=t.matchPrefix(r,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substr(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substr(5),10)*1e3*.95-50*40*8:u=void 0,n.forEach(function(p){p.maxBitrate=u})),n},t.parseRtcpParameters=function(r){var n={},i=t.matchPrefix(r,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;var a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.parseMsid=function(r){var n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};var o=t.matchPrefix(r,"a=ssrc:").map(function(a){return t.parseSsrcMedia(a)}).filter(function(a){return a.attribute==="msid"});if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(r){var n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:n.fmt,maxMessageSize:o};var l=t.matchPrefix(r,"a=sctpmap:");if(l.length>0){var s=t.matchPrefix(r,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){var i=[];return r.protocol!=="DTLS/SCTP"?i=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(r,n,i){var o,a=n!==void 0?n:2;r?o=r:o=t.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(r,n,i,o){var a=t.writeRtpDescription(r.kind,n);if(a+=t.writeIceParameters(r.iceGatherer.getLocalParameters()),a+=t.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),a+="a=mid:"+r.mid+`\r
`,r.direction?a+="a="+r.direction+`\r
`:r.rtpSender&&r.rtpReceiver?a+=`a=sendrecv\r
`:r.rtpSender?a+=`a=sendonly\r
`:r.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,r.rtpSender){var l="msid:"+o.id+" "+r.rtpSender.track.id+`\r
`;a+="a="+l,a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+l,r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),a},t.getDirection=function(r,n){for(var i=t.splitLines(r),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){var n=t.splitLines(r),i=n[0].split(" ");return i[0].substr(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){var n=t.splitLines(r),i=n[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(r){var n=t.matchPrefix(r,"o=")[0],i=n.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var n=t.splitLines(r),i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(sp);const wr=Jr;var $=Jr;function ap(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function Do(e,t,r,n,i){var o=$.writeRtpDescription(e.kind,t);if(o+=$.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=$.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":i||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var l="msid:"+(n?n.id:"-")+" "+a+`\r
`;o+="a="+l,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+$.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+$.localCName+`\r
`),o}function cp(e,t){var r=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(n){if(n&&(n.urls||n.url)){var i=n.urls||n.url;n.url&&!n.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(a){var l=a.indexOf("turn:")===0&&a.indexOf("transport=udp")!==-1&&a.indexOf("turn:[")===-1&&!r;return l?(r=!0,!0):a.indexOf("stun:")===0&&t>=14393&&a.indexOf("?transport=udp")===-1}),delete n.url,n.urls=o?i[0]:i,!!i.length}})}function kr(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(o,a){o=parseInt(o,10);for(var l=0;l<a.length;l++)if(a[l].payloadType===o||a[l].preferredPayloadType===o)return a[l]},i=function(o,a,l,s){var c=n(o.parameters.apt,l),f=n(a.parameters.apt,s);return c&&f&&c.name.toLowerCase()===f.name.toLowerCase()};return e.codecs.forEach(function(o){for(var a=0;a<t.codecs.length;a++){var l=t.codecs[a];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,e.codecs,t.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),r.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(s){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===s.type&&o.rtcpFeedback[c].parameter===s.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var a=0;a<t.headerExtensions.length;a++){var l=t.headerExtensions[a];if(o.uri===l.uri){r.headerExtensions.push(l);break}}}),r}function Mo(e,t,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)!==-1}function Sn(e,t){var r=e.getRemoteCandidates().find(function(n){return t.foundation===n.foundation&&t.ip===n.ip&&t.port===n.port&&t.priority===n.priority&&t.protocol===n.protocol&&t.type===n.type});return r||e.addRemoteCandidate(t),!r}function be(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var lp=function(e,t){function r(s,c){c.addTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:s}))}function n(s,c){c.removeTrack(s),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:s}))}function i(s,c,f,u){var p=new Event("track");p.track=c,p.receiver=f,p.transceiver={receiver:f},p.streams=u,e.setTimeout(function(){s._dispatchEvent("track",p)})}var o=function(s){var c=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){c[p]=f[p].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw be("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=cp(s.iceServers||[],t),this._iceGatherers=[],s.iceCandidatePoolSize)for(var u=s.iceCandidatePoolSize;u>0;u--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=$.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(s,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+s]=="function"&&this["on"+s](c))},o.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(s,c){var f=this.transceivers.length>0,u={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)u.iceTransport=this.transceivers[0].iceTransport,u.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();u.iceTransport=p.iceTransport,u.dtlsTransport=p.dtlsTransport}return c||this.transceivers.push(u),u},o.prototype.addTrack=function(s,c){if(this._isClosed)throw be("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(m){return m.track===s});if(f)throw be("InvalidAccessError","Track already exists.");for(var u,p=0;p<this.transceivers.length;p++)!this.transceivers[p].track&&this.transceivers[p].kind===s.kind&&(u=this.transceivers[p]);return u||(u=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),u.track=s,u.stream=c,u.rtpSender=new e.RTCRtpSender(s,u.dtlsTransport),u.rtpSender},o.prototype.addStream=function(s){var c=this;if(t>=15025)s.getTracks().forEach(function(u){c.addTrack(u,s)});else{var f=s.clone();s.getTracks().forEach(function(u,p){var m=f.getTracks()[p];u.addEventListener("enabled",function(g){m.enabled=g.enabled})}),f.getTracks().forEach(function(u){c.addTrack(u,f)})}},o.prototype.removeTrack=function(s){if(this._isClosed)throw be("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(p){return p.rtpSender===s});if(!c)throw be("InvalidAccessError","Sender was not created by this connection.");var f=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var u=this.transceivers.map(function(p){return p.stream});u.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(s){var c=this;s.getTracks().forEach(function(f){var u=c.getSenders().find(function(p){return p.track===f});u&&c.removeTrack(u)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},o.prototype._createIceGatherer=function(s,c){var f=this;if(c&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var u=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(u,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(p){var m=!p.candidate||Object.keys(p.candidate).length===0;u.state=m?"completed":"gathering",f.transceivers[s].bufferedCandidateEvents!==null&&f.transceivers[s].bufferedCandidateEvents.push(p)},u.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),u},o.prototype._gather=function(s,c){var f=this,u=this.transceivers[c].iceGatherer;if(!u.onlocalcandidate){var p=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,u.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),u.onlocalcandidate=function(m){if(!(f.usingBundle&&c>0)){var g=new Event("icecandidate");g.candidate={sdpMid:s,sdpMLineIndex:c};var v=m.candidate,T=!v||Object.keys(v).length===0;if(T)(u.state==="new"||u.state==="gathering")&&(u.state="completed");else{u.state==="new"&&(u.state="gathering"),v.component=1,v.ufrag=u.getLocalParameters().usernameFragment;var _=$.writeCandidate(v);g.candidate=Object.assign(g.candidate,$.parseCandidate(_)),g.candidate.candidate=_,g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}var P=$.getMediaSections(f._localDescription.sdp);T?P[g.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:P[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+`\r
`,f._localDescription.sdp=$.getDescription(f._localDescription.sdp)+P.join("");var M=f.transceivers.every(function(w){return w.iceGatherer&&w.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),T||f._dispatchEvent("icecandidate",g),M&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},e.setTimeout(function(){p.forEach(function(m){u.onlocalcandidate(m)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var s=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var f=new e.RTCDtlsTransport(c);return f.ondtlsstatechange=function(){s._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:c,dtlsTransport:f}},o.prototype._disposeIceAndDtlsTransports=function(s){var c=this.transceivers[s].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[s].iceGatherer);var f=this.transceivers[s].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[s].iceTransport);var u=this.transceivers[s].dtlsTransport;u&&(delete u.ondtlsstatechange,delete u.onerror,delete this.transceivers[s].dtlsTransport)},o.prototype._transceive=function(s,c,f){var u=kr(s.localCapabilities,s.remoteCapabilities);c&&s.rtpSender&&(u.encodings=s.sendEncodingParameters,u.rtcp={cname:$.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(u.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(u)),f&&s.rtpReceiver&&u.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&t<15019&&s.recvEncodingParameters.forEach(function(p){delete p.rtx}),s.recvEncodingParameters.length?u.encodings=s.recvEncodingParameters:u.encodings=[{}],u.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(u.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(u.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(u))},o.prototype.setLocalDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(be("TypeError",'Unsupported type "'+s.type+'"'));if(!Mo("setLocalDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(be("InvalidStateError","Can not set local "+s.type+" in state "+c.signalingState));var f,u;if(s.type==="offer")f=$.splitSections(s.sdp),u=f.shift(),f.forEach(function(m,g){var v=$.parseRtpParameters(m);c.transceivers[g].localCapabilities=v}),c.transceivers.forEach(function(m,g){c._gather(m.mid,g)});else if(s.type==="answer"){f=$.splitSections(c._remoteDescription.sdp),u=f.shift();var p=$.matchPrefix(u,"a=ice-lite").length>0;f.forEach(function(m,g){var v=c.transceivers[g],T=v.iceGatherer,_=v.iceTransport,P=v.dtlsTransport,M=v.localCapabilities,w=v.remoteCapabilities,G=$.isRejected(m)&&$.matchPrefix(m,"a=bundle-only").length===0;if(!G&&!v.rejected){var q=$.getIceParameters(m,u),oe=$.getDtlsParameters(m,u);p&&(oe.role="server"),(!c.usingBundle||g===0)&&(c._gather(v.mid,g),_.state==="new"&&_.start(T,q,p?"controlling":"controlled"),P.state==="new"&&P.start(oe));var re=kr(M,w);c._transceive(v,re.codecs.length>0,!1)}})}return c._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(s){var c=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(be("TypeError",'Unsupported type "'+s.type+'"'));if(!Mo("setRemoteDescription",s.type,c.signalingState)||c._isClosed)return Promise.reject(be("InvalidStateError","Can not set remote "+s.type+" in state "+c.signalingState));var f={};c.remoteStreams.forEach(function(_){f[_.id]=_});var u=[],p=$.splitSections(s.sdp),m=p.shift(),g=$.matchPrefix(m,"a=ice-lite").length>0,v=$.matchPrefix(m,"a=group:BUNDLE ").length>0;c.usingBundle=v;var T=$.matchPrefix(m,"a=ice-options:")[0];return T?c.canTrickleIceCandidates=T.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,p.forEach(function(_,P){var M=$.splitLines(_),w=$.getKind(_),G=$.isRejected(_)&&$.matchPrefix(_,"a=bundle-only").length===0,q=M[0].substr(2).split(" ")[2],oe=$.getDirection(_,m),re=$.parseMsid(_),nt=$.getMid(_)||$.generateIdentifier();if(G||w==="application"&&(q==="DTLS/SCTP"||q==="UDP/DTLS/SCTP")){c.transceivers[P]={mid:nt,kind:w,protocol:q,rejected:!0};return}!G&&c.transceivers[P]&&c.transceivers[P].rejected&&(c.transceivers[P]=c._createTransceiver(w,!0));var N,we,_e,Je,de,it,se,Y,J,xe=$.parseRtpParameters(_),We,Te;G||(We=$.getIceParameters(_,m),Te=$.getDtlsParameters(_,m),Te.role="client"),se=$.parseRtpEncodingParameters(_);var he=$.parseRtcpParameters(_),ot=$.matchPrefix(_,"a=end-of-candidates",m).length>0,Le=$.matchPrefix(_,"a=candidate:").map(function(U){return $.parseCandidate(U)}).filter(function(U){return U.component===1});if((s.type==="offer"||s.type==="answer")&&!G&&v&&P>0&&c.transceivers[P]&&(c._disposeIceAndDtlsTransports(P),c.transceivers[P].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[P].iceTransport=c.transceivers[0].iceTransport,c.transceivers[P].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[P].rtpSender&&c.transceivers[P].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[P].rtpReceiver&&c.transceivers[P].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),s.type==="offer"&&!G){N=c.transceivers[P]||c._createTransceiver(w),N.mid=nt,N.iceGatherer||(N.iceGatherer=c._createIceGatherer(P,v)),Le.length&&N.iceTransport.state==="new"&&(ot&&(!v||P===0)?N.iceTransport.setRemoteCandidates(Le):Le.forEach(function(U){Sn(N.iceTransport,U)})),Y=e.RTCRtpReceiver.getCapabilities(w),t<15019&&(Y.codecs=Y.codecs.filter(function(U){return U.name!=="rtx"})),it=N.sendEncodingParameters||[{ssrc:(2*P+2)*1001}];var C=!1;if(oe==="sendrecv"||oe==="sendonly"){if(C=!N.rtpReceiver,de=N.rtpReceiver||new e.RTCRtpReceiver(N.dtlsTransport,w),C){var O;J=de.track,re&&re.stream==="-"||(re?(f[re.stream]||(f[re.stream]=new e.MediaStream,Object.defineProperty(f[re.stream],"id",{get:function(){return re.stream}})),Object.defineProperty(J,"id",{get:function(){return re.track}}),O=f[re.stream]):(f.default||(f.default=new e.MediaStream),O=f.default)),O&&(r(J,O),N.associatedRemoteMediaStreams.push(O)),u.push([J,de,O])}}else N.rtpReceiver&&N.rtpReceiver.track&&(N.associatedRemoteMediaStreams.forEach(function(U){var ne=U.getTracks().find(function(K){return K.id===N.rtpReceiver.track.id});ne&&n(ne,U)}),N.associatedRemoteMediaStreams=[]);N.localCapabilities=Y,N.remoteCapabilities=xe,N.rtpReceiver=de,N.rtcpParameters=he,N.sendEncodingParameters=it,N.recvEncodingParameters=se,c._transceive(c.transceivers[P],!1,C)}else if(s.type==="answer"&&!G){N=c.transceivers[P],we=N.iceGatherer,_e=N.iceTransport,Je=N.dtlsTransport,de=N.rtpReceiver,it=N.sendEncodingParameters,Y=N.localCapabilities,c.transceivers[P].recvEncodingParameters=se,c.transceivers[P].remoteCapabilities=xe,c.transceivers[P].rtcpParameters=he,Le.length&&_e.state==="new"&&((g||ot)&&(!v||P===0)?_e.setRemoteCandidates(Le):Le.forEach(function(U){Sn(N.iceTransport,U)})),(!v||P===0)&&(_e.state==="new"&&_e.start(we,We,"controlling"),Je.state==="new"&&Je.start(Te));var D=kr(N.localCapabilities,N.remoteCapabilities),B=D.codecs.filter(function(U){return U.name.toLowerCase()==="rtx"}).length;!B&&N.sendEncodingParameters[0].rtx&&delete N.sendEncodingParameters[0].rtx,c._transceive(N,oe==="sendrecv"||oe==="recvonly",oe==="sendrecv"||oe==="sendonly"),de&&(oe==="sendrecv"||oe==="sendonly")?(J=de.track,re?(f[re.stream]||(f[re.stream]=new e.MediaStream),r(J,f[re.stream]),u.push([J,de,f[re.stream]])):(f.default||(f.default=new e.MediaStream),r(J,f.default),u.push([J,de,f.default]))):delete N.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=s.type==="offer"?"active":"passive"),c._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(f).forEach(function(_){var P=f[_];if(P.getTracks().length){if(c.remoteStreams.indexOf(P)===-1){c.remoteStreams.push(P);var M=new Event("addstream");M.stream=P,e.setTimeout(function(){c._dispatchEvent("addstream",M)})}u.forEach(function(w){var G=w[0],q=w[1];P.id===w[2].id&&i(c,G,q,[P])})}}),u.forEach(function(_){_[2]||i(c,_[0],_[1],[])}),e.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(_){_.iceTransport&&_.iceTransport.state==="new"&&_.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),_.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(s){this.signalingState=s;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var c=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var s,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&!u.rejected&&c[u.iceTransport.state]++}),s="new",c.failed>0?s="failed":c.checking>0?s="checking":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0?s="connected":c.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},o.prototype._updateConnectionState=function(){var s,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(u){u.iceTransport&&u.dtlsTransport&&!u.rejected&&(c[u.iceTransport.state]++,c[u.dtlsTransport.state]++)}),c.connected+=c.completed,s="new",c.failed>0?s="failed":c.connecting>0?s="connecting":c.disconnected>0?s="disconnected":c.new>0?s="new":c.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},o.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(be("InvalidStateError","Can not call createOffer after close"));var c=s.transceivers.filter(function(g){return g.kind==="audio"}).length,f=s.transceivers.filter(function(g){return g.kind==="video"}).length,u=arguments[0];if(u){if(u.mandatory||u.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");u.offerToReceiveAudio!==void 0&&(u.offerToReceiveAudio===!0?c=1:u.offerToReceiveAudio===!1?c=0:c=u.offerToReceiveAudio),u.offerToReceiveVideo!==void 0&&(u.offerToReceiveVideo===!0?f=1:u.offerToReceiveVideo===!1?f=0:f=u.offerToReceiveVideo)}for(s.transceivers.forEach(function(g){g.kind==="audio"?(c--,c<0&&(g.wantReceive=!1)):g.kind==="video"&&(f--,f<0&&(g.wantReceive=!1))});c>0||f>0;)c>0&&(s._createTransceiver("audio"),c--),f>0&&(s._createTransceiver("video"),f--);var p=$.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(g,v){var T=g.track,_=g.kind,P=g.mid||$.generateIdentifier();g.mid=P,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(v,s.usingBundle));var M=e.RTCRtpSender.getCapabilities(_);t<15019&&(M.codecs=M.codecs.filter(function(G){return G.name!=="rtx"})),M.codecs.forEach(function(G){G.name==="H264"&&G.parameters["level-asymmetry-allowed"]===void 0&&(G.parameters["level-asymmetry-allowed"]="1"),g.remoteCapabilities&&g.remoteCapabilities.codecs&&g.remoteCapabilities.codecs.forEach(function(q){G.name.toLowerCase()===q.name.toLowerCase()&&G.clockRate===q.clockRate&&(G.preferredPayloadType=q.payloadType)})}),M.headerExtensions.forEach(function(G){var q=g.remoteCapabilities&&g.remoteCapabilities.headerExtensions||[];q.forEach(function(oe){G.uri===oe.uri&&(G.id=oe.id)})});var w=g.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];T&&t>=15019&&_==="video"&&!w[0].rtx&&(w[0].rtx={ssrc:w[0].ssrc+1}),g.wantReceive&&(g.rtpReceiver=new e.RTCRtpReceiver(g.dtlsTransport,_)),g.localCapabilities=M,g.sendEncodingParameters=w}),s._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+s.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(g,v){p+=Do(g,g.localCapabilities,"offer",g.stream,s._dtlsRole),p+=`a=rtcp-rsize\r
`,g.iceGatherer&&s.iceGatheringState!=="new"&&(v===0||!s.usingBundle)&&(g.iceGatherer.getLocalCandidates().forEach(function(T){T.component=1,p+="a="+$.writeCandidate(T)+`\r
`}),g.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var m=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(m)},o.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(be("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(be("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var c=$.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(c+="a=group:BUNDLE "+s.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var f=$.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(p,m){if(!(m+1>f)){if(p.rejected){p.kind==="application"?p.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`;return}if(p.stream){var g;p.kind==="audio"?g=p.stream.getAudioTracks()[0]:p.kind==="video"&&(g=p.stream.getVideoTracks()[0]),g&&t>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1})}var v=kr(p.localCapabilities,p.remoteCapabilities),T=v.codecs.filter(function(_){return _.name.toLowerCase()==="rtx"}).length;!T&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,c+=Do(p,v,"answer",p.stream,s._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var u=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(u)},o.prototype.addIceCandidate=function(s){var c=this,f;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(u,p){if(c._remoteDescription)if(!s||s.candidate==="")for(var m=0;m<c.transceivers.length&&!(!c.transceivers[m].rejected&&(c.transceivers[m].iceTransport.addRemoteCandidate({}),f=$.getMediaSections(c._remoteDescription.sdp),f[m]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=$.getDescription(c._remoteDescription.sdp)+f.join(""),c.usingBundle));m++);else{var g=s.sdpMLineIndex;if(s.sdpMid){for(var v=0;v<c.transceivers.length;v++)if(c.transceivers[v].mid===s.sdpMid){g=v;break}}var T=c.transceivers[g];if(T){if(T.rejected)return u();var _=Object.keys(s.candidate).length>0?$.parseCandidate(s.candidate):{};if(_.protocol==="tcp"&&(_.port===0||_.port===9)||_.component&&_.component!==1)return u();if((g===0||g>0&&T.iceTransport!==c.transceivers[0].iceTransport)&&!Sn(T.iceTransport,_))return p(be("OperationError","Can not add ICE candidate"));var P=s.candidate.trim();P.indexOf("a=")===0&&(P=P.substr(2)),f=$.getMediaSections(c._remoteDescription.sdp),f[g]+="a="+(_.type?P:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=$.getDescription(c._remoteDescription.sdp)+f.join("")}else return p(be("OperationError","Can not add ICE candidate"))}else return p(be("InvalidStateError","Can not add ICE candidate without a remote description"));u()})},o.prototype.getStats=function(s){if(s&&s instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(u){u.rtpSender&&u.rtpSender.track===s?c=u.rtpSender:u.rtpReceiver&&u.rtpReceiver.track===s&&(c=u.rtpReceiver)}),!c)throw be("InvalidAccessError","Invalid selector.");return c.getStats()}var f=[];return this.transceivers.forEach(function(u){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){u[p]&&f.push(u[p].getStats())})}),Promise.all(f).then(function(u){var p=new Map;return u.forEach(function(m){m.forEach(function(g){p.set(g.id,g)})}),p})};var a=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];a.forEach(function(s){var c=e[s];if(c&&c.prototype&&c.prototype.getStats){var f=c.prototype.getStats;c.prototype.getStats=function(){return f.apply(this).then(function(u){var p=new Map;return Object.keys(u).forEach(function(m){u[m].type=ap(u[m]),p.set(m,u[m])}),p})}}});var l=["createOffer","createAnswer"];return l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?c.apply(this,[arguments[2]]).then(function(u){typeof f[0]=="function"&&f[0].apply(null,[u])},function(u){typeof f[1]=="function"&&f[1].apply(null,[u])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(u){typeof f[2]=="function"&&f[2].apply(null,[u])}):c.apply(this,arguments)}}),["getStats"].forEach(function(s){var c=o.prototype[s];o.prototype[s]=function(){var f=arguments;return typeof f[1]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):c.apply(this,arguments)}}),o};function ma(e){const t=e&&e.navigator,r=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return n(i).catch(o=>Promise.reject(r(o)))}}function ga(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Un(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){n.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=lp(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=op(i.iceServers,t.version),bi("ICE servers after filtering:",i.iceServers)),new r(i)},e.RTCPeerConnection.prototype=r.prototype}function va(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const Io=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:ga,shimGetUserMedia:ma,shimPeerConnection:Un,shimReplaceTrack:va},Symbol.toStringTag,{value:"Module"}));function ya(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){ln("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const i=function(a,l,s){l in a&&!(s in a)&&(a[s]=a[l],delete a[l])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const l=a.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function fp(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function _a(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zn(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;return n.apply(this,[o||null]).then(s=>{if(t.version<53&&!a)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((f,u)=>{s.set(u,Object.assign({},f,{type:r[f.type]||f.type}))})}return s}).then(a,l)}}function ba(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ca(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Qt(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Sa(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){ln("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Ta(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Pa(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:a}=o,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n.sendEncodings,a.sendEncodings=n.sendEncodings,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function Ea(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Ra(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function xa(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Ao=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Pa,shimCreateAnswer:xa,shimCreateOffer:Ra,shimGetDisplayMedia:fp,shimGetParameters:Ea,shimGetUserMedia:ya,shimOnTrack:_a,shimPeerConnection:zn,shimRTCDataChannel:Ta,shimReceiverGetStats:Ca,shimRemoveStream:Sa,shimSenderGetStats:ba},Symbol.toStringTag,{value:"Module"}));function ka(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>t.call(this,i,n)),n.getVideoTracks().forEach(i=>t.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const i=r.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Oa(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,n.dispatchEvent(a)})}),t.apply(n,arguments)}}}function Da(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p},t.createAnswer=function(c,f){const u=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[u]);return f?(p.then(c,f),Promise.resolve()):p};let l=function(s,c,f){const u=i.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u};t.setLocalDescription=l,l=function(s,c,f){const u=o.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.setRemoteDescription=l,l=function(s,c,f){const u=a.apply(this,[s]);return f?(u.then(c,f),Promise.resolve()):u},t.addIceCandidate=l}function Ma(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(Ia(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(n,i,o){t.mediaDevices.getUserMedia(n).then(i,o)}.bind(t))}function Ia(e){return e&&e.video!==void 0?Object.assign({},e,{video:oa(e.video)}):e}function Aa(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const o=[];for(let a=0;a<n.iceServers.length;a++){let l=n.iceServers[a];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(ln("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(n.iceServers[a])}n.iceServers=o}return new t(n,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function ja(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ba(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function wa(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const jo=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:wa,shimCallbacksAPI:Da,shimConstraints:Ia,shimCreateOfferLegacy:Ba,shimGetUserMedia:Ma,shimLocalStreamsAPI:ka,shimRTCIceServerUrls:Aa,shimRemoteStreamsAPI:Oa,shimTrackEventTransceiver:ja},Symbol.toStringTag,{value:"Module"}));function Lr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const i=new t(n),o=wr.parseCandidate(n.candidate),a=Object.assign(i,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,Qt(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function or(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const s=wr.splitSections(l.sdp);return s.shift(),s.some(c=>{const f=wr.parseMLine(c);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(l){const s=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const c=parseInt(s[1],10);return c!==c?-1:c},i=function(l){let s=65536;return t.browser==="firefox"&&(t.version<57?l===-1?s=16384:s=2147483637:t.version<60?s=t.version===57?65535:65536:s=2147483637),s},o=function(l,s){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const f=wr.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?c=parseInt(f[0].substr(19),10):t.browser==="firefox"&&s!==-1&&(c=2147483637),c},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const s=n(arguments[0]),c=i(s),f=o(arguments[0],s);let u;c===0&&f===0?u=Number.POSITIVE_INFINITY:c===0||f===0?u=Math.max(c,f):u=Math.min(c,f);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return u}}),this._sctp=p}return a.apply(this,arguments)}}function sr(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){const o=n.send;n.send=function(){const l=arguments[0],s=l.length||l.size||l.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=r.apply(this,arguments);return t(i,this),i},Qt(e,"datachannel",n=>(t(n.channel,n.target),n))}function Gn(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Hn(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return r.apply(this,arguments)}}function Fr(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const up=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Hn,shimAddIceCandidateNullOrEmpty:Fr,shimConnectionState:Gn,shimMaxMessageSize:or,shimRTCIceCandidate:Lr,shimSendThrowTypeError:sr},Symbol.toStringTag,{value:"Module"}));function pp({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=bi,n=np(e),i={browserDetails:n,commonShim:up,extractVersion:ir,disableLog:tp,disableWarnings:rp};switch(n.browser){case"chrome":if(!Oo||!Nn||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=Oo,Fr(e,n),sa(e,n),aa(e),Nn(e,n),ca(e),da(e,n),la(e),fa(e),ua(e),ha(e,n),Lr(e),Gn(e),or(e,n),sr(e),Hn(e,n);break;case"firefox":if(!Ao||!zn||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=Ao,Fr(e,n),ya(e,n),zn(e,n),_a(e),Sa(e),ba(e),Ca(e),Ta(e),Pa(e),Ea(e),Ra(e),xa(e),Lr(e),Gn(e),or(e,n),sr(e);break;case"edge":if(!Io||!Un||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),i;r("adapter.js shimming edge."),i.browserShim=Io,ma(e),ga(e),Un(e,n),va(e),or(e,n),sr(e);break;case"safari":if(!jo||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=jo,Fr(e,n),Aa(e),Ba(e),Da(e),ka(e),Oa(e),ja(e),Ma(e),wa(e),Lr(e),or(e,n),sr(e),Hn(e,n);break;default:r("Unsupported browser!");break}return i}const Bo=pp({window:typeof window>"u"?void 0:window});function rt(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var Tn=Bo.default||Bo,er=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),r=this.getVersion(),n=this.supportedBrowsers.includes(t);return n?t==="chrome"?r>=this.minChromeVersion:t==="firefox"?r>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return Tn.browserDetails.browser},e.prototype.getVersion=function(){return Tn.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),r=Tn.browserDetails.version||0;if(t==="chrome"&&r<this.minChromeVersion)return!1;if(t==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),wo={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},dp=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=wo,this.browser=er.getBrowser(),this.browserVersion=er.getVersion(),this.supports=function(){var t={browser:er.isBrowserSupported(),webRTC:er.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;var r;try{r=new RTCPeerConnection(wo),t.audioVideo=!0;var n=void 0;try{n=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!n.ordered;try{n.binaryType="blob",t.binaryBlob=!er.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{r&&r.close()}return t}(),this.pack=Eo.pack,this.unpack=Eo.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var r=[],n=t.size,i=Math.ceil(n/Z.chunkedMTU),o=0,a=0;a<n;){var l=Math.min(n,a+Z.chunkedMTU),s=t.slice(a,l),c={__peerData:this._dataCount,n:o,data:s,total:i};r.push(c),a=l,o++}return this._dataCount++,r},e.prototype.blobToArrayBuffer=function(t,r){var n=new FileReader;return n.onload=function(i){i.target&&r(i.target.result)},n.readAsArrayBuffer(t),n},e.prototype.binaryStringToArrayBuffer=function(t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n)&255;return r.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),Z=new dp,La={};rt(La,"Peer",()=>Qr,e=>Qr=e);var Cr={},hp=Object.prototype.hasOwnProperty,Re="~";function _r(){}Object.create&&(_r.prototype=Object.create(null),new _r().__proto__||(Re=!1));function mp(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Fa(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new mp(r,n||e,i),a=Re?Re+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function $r(e,t){--e._eventsCount===0?e._events=new _r:delete e._events[t]}function Se(){this._events=new _r,this._eventsCount=0}Se.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)hp.call(r,n)&&t.push(Re?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Se.prototype.listeners=function(t){var r=Re?Re+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Se.prototype.listenerCount=function(t){var r=Re?Re+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Se.prototype.emit=function(t,r,n,i,o,a){var l=Re?Re+t:t;if(!this._events[l])return!1;var s=this._events[l],c=arguments.length,f,u;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,r),!0;case 3:return s.fn.call(s.context,r,n),!0;case 4:return s.fn.call(s.context,r,n,i),!0;case 5:return s.fn.call(s.context,r,n,i,o),!0;case 6:return s.fn.call(s.context,r,n,i,o,a),!0}for(u=1,f=new Array(c-1);u<c;u++)f[u-1]=arguments[u];s.fn.apply(s.context,f)}else{var p=s.length,m;for(u=0;u<p;u++)switch(s[u].once&&this.removeListener(t,s[u].fn,void 0,!0),c){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,r);break;case 3:s[u].fn.call(s[u].context,r,n);break;case 4:s[u].fn.call(s[u].context,r,n,i);break;default:if(!f)for(m=1,f=new Array(c-1);m<c;m++)f[m-1]=arguments[m];s[u].fn.apply(s[u].context,f)}}return!0};Se.prototype.on=function(t,r,n){return Fa(this,t,r,n,!1)};Se.prototype.once=function(t,r,n){return Fa(this,t,r,n,!0)};Se.prototype.removeListener=function(t,r,n,i){var o=Re?Re+t:t;if(!this._events[o])return this;if(!r)return $r(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&$r(this,o);else{for(var l=0,s=[],c=a.length;l<c;l++)(a[l].fn!==r||i&&!a[l].once||n&&a[l].context!==n)&&s.push(a[l]);s.length?this._events[o]=s.length===1?s[0]:s:$r(this,o)}return this};Se.prototype.removeAllListeners=function(t){var r;return t?(r=Re?Re+t:t,this._events[r]&&$r(this,r)):(this._events=new _r,this._eventsCount=0),this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.addListener=Se.prototype.on;Se.prefixed=Re;Se.EventEmitter=Se;Cr=Se;var A={};rt(A,"LogLevel",()=>Oe,e=>Oe=e);rt(A,"default",()=>Lo,e=>Lo=e);var St=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Tt=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},gp="PeerJS: ",Oe;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(Oe||(Oe={}));var vp=function(){function e(){this._logLevel=Oe.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=Oe.All&&this._print.apply(this,Tt([Oe.All],St(t),!1))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=Oe.Warnings&&this._print.apply(this,Tt([Oe.Warnings],St(t),!1))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel>=Oe.Errors&&this._print.apply(this,Tt([Oe.Errors],St(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=Tt([gp],St(r),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=Oe.All?console.log.apply(console,Tt([],St(i),!1)):t>=Oe.Warnings?console.warn.apply(console,Tt(["WARNING"],St(i),!1)):t>=Oe.Errors&&console.error.apply(console,Tt(["ERROR"],St(i),!1))},e}(),Lo=new vp,$a={};rt($a,"Socket",()=>Fo,e=>Fo=e);var Ne;(function(e){e.Data="data",e.Media="media"})(Ne||(Ne={}));var le;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(le||(le={}));var ct;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(ct||(ct={}));var ft;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(ft||(ft={}));var me;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(me||(me={}));var Ci={};Ci=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var yp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_p=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},bp=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Cp=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fo=function(e){yp(t,e);function t(r,n,i,o,a,l){l===void 0&&(l=5e3);var s=e.call(this)||this;s.pingInterval=l,s._disconnected=!0,s._messagesQueue=[];var c=r?"wss://":"ws://";return s._baseUrl=c+n+":"+i+o+"peerjs?key="+a,s}return t.prototype.start=function(r,n){var i=this;this._id=r;var o="".concat(this._baseUrl,"&id=").concat(r,"&token=").concat(n);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Ci.version),this._disconnected=!1,this._socket.onmessage=function(a){var l;try{l=JSON.parse(a.data),A.default.log("Server message received:",l)}catch{A.default.log("Invalid server message",a.data);return}i.emit(ft.Message,l)},this._socket.onclose=function(a){i._disconnected||(A.default.log("Socket closed.",a),i._cleanup(),i._disconnected=!0,i.emit(ft.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),A.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var r=this;this._wsPingTimer=setTimeout(function(){r._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(!this._wsOpen()){A.default.log("Cannot send heartbeat, because socket closed");return}var r=JSON.stringify({type:me.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()},t.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},t.prototype._sendQueuedMessages=function(){var r,n,i=bp([],_p(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=Cp(i),a=o.next();!a.done;a=o.next()){var l=a.value;this.send(l)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.send=function(r){if(!this._disconnected){if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(ft.Error,"Invalid message");return}if(this._wsOpen()){var n=JSON.stringify(r);this._socket.send(n)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(Cr.EventEmitter),Kn={};rt(Kn,"MediaConnection",()=>Uo,e=>Uo=e);var Si={};rt(Si,"Negotiator",()=>$o,e=>$o=e);var Wr=function(){return Wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wr.apply(this,arguments)},Or=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},Dr=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},$o=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Ne.Media&&t._stream&&this._addTracksToConnection(t._stream,r),t.originator){if(this.connection.type===Ne.Data){var n=this.connection,i={ordered:!!t.reliable},o=r.createDataChannel(n.label,i);n.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){A.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var r=this,n=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;A.default.log("Listening for ICE candidates."),t.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(A.default.log("Received ICE candidates for ".concat(n,":"),l.candidate),a.socket.send({type:me.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":A.default.log("iceConnectionState is failed, closing connections to "+n),r.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),r.connection.close();break;case"closed":A.default.log("iceConnectionState is closed, closing connections to "+n),r.connection.emit("error",new Error("Connection to "+n+" closed.")),r.connection.close();break;case"disconnected":A.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=Z.noop;break}r.connection.emit("iceStateChanged",t.iceConnectionState)},A.default.log("Listening for data channel"),t.ondatachannel=function(l){A.default.log("Received data channel");var s=l.channel,c=a.getConnection(n,i);c.initialize(s)},A.default.log("Listening for remote stream"),t.ontrack=function(l){A.default.log("Received remote stream");var s=l.streams[0],c=a.getConnection(n,i);if(c.type===Ne.Media){var f=c;r._addStreamToMediaConnection(s,f)}}},e.prototype.cleanup=function(){A.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var r=t.signalingState!=="closed",n=!1;if(this.connection.type===Ne.Data){var i=this.connection,o=i.dataChannel;o&&(n=!!o.readyState&&o.readyState!=="closed")}(r||n)&&t.close()}},e.prototype._makeOffer=function(){return Or(this,void 0,Promise,function(){var t,r,n,i,o,a,l;return Dr(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),A.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return s.sent(),A.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Z.browser},this.connection.type===Ne.Data&&(o=this.connection,i=Wr(Wr({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),r.socket.send({type:me.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return a=s.sent(),a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(le.WebRTC,a),A.default.log("Failed to setLocalDescription, ",a)),[3,6];case 6:return[3,8];case 7:return l=s.sent(),r.emitError(le.WebRTC,l),A.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return Or(this,void 0,Promise,function(){var t,r,n,i,o;return Dr(this,function(a){switch(a.label){case 0:t=this.connection.peerConnection,r=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:n=a.sent(),A.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return a.sent(),A.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),r.socket.send({type:me.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:Z.browser},dst:this.connection.peer}),[3,6];case 5:return i=a.sent(),r.emitError(le.WebRTC,i),A.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=a.sent(),r.emitError(le.WebRTC,o),A.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,r){return Or(this,void 0,Promise,function(){var n,i,o,a;return Dr(this,function(l){switch(l.label){case 0:r=new RTCSessionDescription(r),n=this.connection.peerConnection,i=this.connection.provider,A.default.log("Setting remote description",r),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,n.setRemoteDescription(r)];case 2:return l.sent(),A.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),t!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return a=l.sent(),i.emitError(le.WebRTC,a),A.default.log("Failed to setRemoteDescription, ",a),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return Or(this,void 0,Promise,function(){var r,n,i,o,a,l;return Dr(this,function(s){switch(s.label){case 0:A.default.log("handleCandidate:",t),r=t.candidate,n=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,a=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:n,candidate:r}))];case 2:return s.sent(),A.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=s.sent(),a.emitError(le.WebRTC,l),A.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,r){if(A.default.log("add tracks from stream ".concat(t.id," to peer connection")),!r.addTrack)return A.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(n){r.addTrack(n,t)})},e.prototype._addStreamToMediaConnection=function(t,r){A.default.log("add stream ".concat(t.id," to media connection ").concat(r.connectionId)),r.addStream(t)},e}(),Ti={};rt(Ti,"BaseConnection",()=>No,e=>No=e);var Sp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),No=function(e){Sp(t,e);function t(r,n,i){var o=e.call(this)||this;return o.peer=r,o.provider=n,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(Cr.EventEmitter),Tp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qr=function(){return qr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qr.apply(this,arguments)},Pp=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uo=function(e){Tp(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+Z.randomToken(),o._negotiator=new Si.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Ne.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(r){A.default.log("Receiving stream",r),this._remoteStream=r,e.prototype.emit.call(this,"stream",r)},t.prototype.handleMessage=function(r){var n=r.type,i=r.payload;switch(r.type){case me.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case me.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:A.default.warn("Unrecognized message type:".concat(n," from peer:").concat(this.peer));break}},t.prototype.answer=function(r,n){var i,o;if(n===void 0&&(n={}),this._localStream){A.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection(qr(qr({},this.options._payload),{_stream:r}));var a=this.provider._getMessages(this.connectionId);try{for(var l=Pp(a),s=l.next();!s.done;s=l.next()){var c=s.value;this.handleMessage(c)}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Ti.BaseConnection),Vn={};rt(Vn,"DataConnection",()=>Go,e=>Go=e);var Na={};rt(Na,"EncodingQueue",()=>zo,e=>zo=e);var Ep=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zo=function(e){Ep(t,e);function t(){var r=e.call(this)||this;return r.fileReader=new FileReader,r._queue=[],r._processing=!1,r.fileReader.onload=function(n){r._processing=!1,n.target&&r.emit("done",n.target.result),r.doNextTask()},r.fileReader.onerror=function(n){A.default.error("EncodingQueue error:",n),r._processing=!1,r.destroy(),r.emit("error",n)},r}return Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(r){this.queue.push(r),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(Cr.EventEmitter),Rp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xp=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=function(e){Rp(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new Na.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+Z.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||ct.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(a){o._bufferedSend(a)}),o._encodingQueue.on("error",function(){A.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new Si.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Ne.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r){this._dc=r,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var r=this;(!Z.supports.binaryBlob||Z.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){A.default.log("DC#".concat(r.connectionId," dc connection success")),r._open=!0,r.emit("open")},this.dataChannel.onmessage=function(n){A.default.log("DC#".concat(r.connectionId," dc onmessage:"),n.data),r._handleDataMessage(n)},this.dataChannel.onclose=function(){A.default.log("DC#".concat(r.connectionId," dc closed for:"),r.peer),r.close()}},t.prototype._handleDataMessage=function(r){var n=this,i=r.data,o=i.constructor,a=this.serialization===ct.Binary||this.serialization===ct.BinaryUTF8,l=i;if(a){if(o===Blob){Z.blobToArrayBuffer(i,function(c){var f=Z.unpack(c);n.emit("data",f)});return}else if(o===ArrayBuffer)l=Z.unpack(i);else if(o===String){var s=Z.binaryStringToArrayBuffer(i);l=Z.unpack(s)}}else this.serialization===ct.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},t.prototype._handleChunk=function(r){var n=r.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:r.total};if(i.data[r.n]=r.data,i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(r,n){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===ct.JSON)this._bufferedSend(this.stringify(r));else if(this.serialization===ct.Binary||this.serialization===ct.BinaryUTF8){var i=Z.pack(r);if(!n&&i.size>Z.chunkedMTU){this._sendChunks(i);return}Z.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(r)},t.prototype._bufferedSend=function(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(r){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(i){return A.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(r){var n,i,o=Z.chunk(r);A.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var a=xp(o),l=a.next();!l.done;l=a.next()){var s=l.value;this.send(s,!0)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.handleMessage=function(r){var n=r.payload;switch(r.type){case me.Answer:this._negotiator.handleSDP(r.type,n.sdp);break;case me.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:A.default.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Ti.BaseConnection),Ua={};rt(Ua,"API",()=>Vo,e=>Vo=e);var Ho=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{c(n.next(f))}catch(u){a(u)}}function s(f){try{c(n.throw(f))}catch(u){a(u)}}function c(f){f.done?o(f.value):i(f.value).then(l,s)}c((n=n.apply(e,t||[])).next())})},Ko=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(f){return s([c,f])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Vo=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var r=this._options.secure?"https":"http",n=this._options,i=n.host,o=n.port,a=n.path,l=n.key,s=new URL("".concat(r,"://").concat(i,":").concat(o).concat(a).concat(l,"/").concat(t));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Ci.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return Ho(this,void 0,Promise,function(){var t,r,n;return Ko(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(t=i.sent(),t.status!==200)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw r=i.sent(),A.default.error("Error retrieving ID",r),n="",this._options.path==="/"&&this._options.host!==Z.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return Ho(this,void 0,Promise,function(){var t,r,n;return Ko(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(t=i.sent(),t.status!==200)throw t.status===401?(r="",this._options.host===Z.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw n=i.sent(),A.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}})})},e}(),kp=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(){return ur=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ur.apply(this,arguments)},tr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Op=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Qr=function(e){kp(t,e);function t(r,n){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return r&&r.constructor==Object?n=r:r&&(o=r.toString()),n=ur({debug:0,host:Z.CLOUD_HOST,port:Z.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:Z.randomToken(),config:Z.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),i._options=n,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==Z.CLOUD_HOST?i._options.secure=Z.isSecure():i._options.host==Z.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&A.default.setLogFunction(i._options.logFunction),A.default.logLevel=i._options.debug||0,i._api=new Ua.API(n),i._socket=i._createServerConnection(),!Z.supports.audioVideo&&!Z.supports.data?(i._delayedAbort(le.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!Z.validateId(o)?(i._delayedAbort(le.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(a){return i._initialize(a)}).catch(function(a){return i._abort(le.ServerError,a)}),i)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var r,n,i=Object.create(null);try{for(var o=tr(this._connections),a=o.next();!a.done;a=o.next()){var l=Op(a.value,2),s=l[0],c=l[1];i[s]=c}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var r=this,n=new $a.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(ft.Message,function(i){r._handleMessage(i)}),n.on(ft.Error,function(i){r._abort(le.SocketError,i)}),n.on(ft.Disconnected,function(){r.disconnected||(r.emitError(le.Network,"Lost connection to server."),r.disconnect())}),n.on(ft.Close,function(){r.disconnected||r._abort(le.SocketClosed,"Underlying socket is already closed.")}),n},t.prototype._initialize=function(r){this._id=r,this.socket.start(r,this._options.token)},t.prototype._handleMessage=function(r){var n,i,o=r.type,a=r.payload,l=r.src;switch(o){case me.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case me.Error:this._abort(le.ServerError,a.msg);break;case me.IdTaken:this._abort(le.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case me.InvalidKey:this._abort(le.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case me.Leave:A.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case me.Expire:this.emitError(le.PeerUnavailable,"Could not connect to peer ".concat(l));break;case me.Offer:var g=a.connectionId,v=this.getConnection(l,g);if(v&&(v.close(),A.default.warn("Offer received for existing Connection ID:".concat(g))),a.type===Ne.Media){var s=new Kn.MediaConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata});v=s,this._addConnection(l,v),this.emit("call",s)}else if(a.type===Ne.Data){var c=new Vn.DataConnection(l,this,{connectionId:g,_payload:a,metadata:a.metadata,label:a.label,serialization:a.serialization,reliable:a.reliable});v=c,this._addConnection(l,v),this.emit("connection",c)}else{A.default.warn("Received malformed connection type:".concat(a.type));return}var f=this._getMessages(g);try{for(var u=tr(f),p=u.next();!p.done;p=u.next()){var m=p.value;v.handleMessage(m)}}catch(T){n={error:T}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}break;default:if(!a){A.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var g=a.connectionId,v=this.getConnection(l,g);v&&v.peerConnection?v.handleMessage(r):g?this._storeMessage(g,r):A.default.warn("You received an unrecognized message:",r);break}},t.prototype._storeMessage=function(r,n){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(n)},t.prototype._getMessages=function(r){var n=this._lostMessages.get(r);return n?(this._lostMessages.delete(r),n):[]},t.prototype.connect=function(r,n){if(n===void 0&&(n={}),this.disconnected){A.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(le.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new Vn.DataConnection(r,this,n);return this._addConnection(r,i),i},t.prototype.call=function(r,n,i){if(i===void 0&&(i={}),this.disconnected){A.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(le.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){A.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new Kn.MediaConnection(r,this,ur(ur({},i),{_stream:n}));return this._addConnection(r,o),o},t.prototype._addConnection=function(r,n){A.default.log("add connection ".concat(n.type,":").concat(n.connectionId," to peerId:").concat(r)),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(n)},t.prototype._removeConnection=function(r){var n=this._connections.get(r.peer);if(n){var i=n.indexOf(r);i!==-1&&n.splice(i,1)}this._lostMessages.delete(r.connectionId)},t.prototype.getConnection=function(r,n){var i,o,a=this._connections.get(r);if(!a)return null;try{for(var l=tr(a),s=l.next();!s.done;s=l.next()){var c=s.value;if(c.connectionId===n)return c}}catch(f){i={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(r,n){var i=this;setTimeout(function(){i._abort(r,n)},0)},t.prototype._abort=function(r,n){A.default.error("Aborting!"),this.emitError(r,n),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(r,n){A.default.error("Error:",n);var i;typeof n=="string"?i=new Error(n):i=n,i.type=r,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(A.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var r,n;try{for(var i=tr(this._connections.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;this._cleanupPeer(a),this._connections.delete(a)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(r){var n,i,o=this._connections.get(r);if(o)try{for(var a=tr(o),l=a.next();!l.done;l=a.next()){var s=l.value;s.close()}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var r=this.id;A.default.log("Disconnect peer with ID:".concat(r)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)A.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)A.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},t.prototype.listAllPeers=function(r){var n=this;r===void 0&&(r=function(i){}),this._api.listAllPeers().then(function(i){return r(i)}).catch(function(i){return n._abort(le.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(Cr.EventEmitter);La.Peer;class Dp{constructor(t){Qe(this,"peerService");Qe(this,"_handlers",{});this.peerService=t}handleData(t){if(console.log("handling data",t),typeof t=="object"){this._handleDataObject(t);return}console.warn("Unknown data type",typeof t)}_handleDataObject(t){const r=this._handlers[t.type];r==null&&console.error("Unknown type for data object",t.type),r({peerService:this.peerService},t)}registerHandler(t,r){this._handlers[t]=r}}class Mp{constructor(){Qe(this,"logTag","[PeerService]");Qe(this,"peer",null);Qe(this,"peerId",Ke(null));Qe(this,"handler");Qe(this,"_store");Qe(this,"_initialized",!1);Qe(this,"peerConnections",Ke([]))}async initSelf(t){return this.handler??(this.handler=new Dp(this)),t!==void 0?this.peer??(this.peer=new Qr(t,{})):this.peer??(this.peer=new Qr),this._initialized?!0:new Promise((r,n)=>{if(!this.peer){console.log(this.logTag+" Peer not initialized on initSelf"),n(!1);return}this.peer.on("open",i=>{var o;this.peerId.value=i,(o=this.peer)==null||o.on("connection",a=>{this.initPeer(a)}),this._initialized=!0,r(!0)})})}initPeer(t){if(!this.peer){console.error(this.logTag+" Peer not initialized");return}if(this.peerConnections.value.filter(r=>r.peer===t.peer).length>0){console.log(this.logTag+" Connection already exists, peer id: ",t.peer);return}t==null||t.on("open",()=>{console.log(`${this.logTag} New connection from peer ${t.peer} established`),t.on("data",r=>{this.handler.handleData(r)}),t.on("close",()=>{console.log(this.logTag+" Connection from peer closed, peer id: ",t.peer),this.peerConnections.value=this.peerConnections.value.filter(r=>r.peer!==t.peer)}),this.peerConnections.value.length>0&&(console.info(this.logTag+" Sending room information to peer",t.peer),t.send({type:"room_information",data:{peers:this.peerConnections.value.map(r=>r.peer)}})),this.peerConnections.value.push(t)})}connectToPeer(t){if(!this.peer)return console.error(this.logTag+" Peer not initialized"),!1;const r=this.peer.connect(t);return r.peerConnection.connectionState==="failed"&&console.warn(this.logTag+" Could not connect to peer: ",t),this.initPeer(r),!0}closeAllConnections(){this.peerConnections.value.forEach(t=>{t.close()})}destroy(){this.closeAllConnections(),this.peer.destroy()}send(t){for(const r of this.peerConnections.value)r.send(t)}}const fn=mf(Tu);fn.use(_f());fn.use(Br);fn.mount("#app");const za=new Mp;fn.provide("peerService",za);window.addEventListener("pagehide",()=>{za.destroy()});export{lt as F,Fs as a,Be as b,De as c,nn as d,Al as e,Bp as f,wp as g,mi as h,tt as i,Ke as j,Lp as k,Fp as l,qn as m,Wn as n,nl as o,Ir as p,Me as q,Br as r,Dl as s,Ap as t,et as u,Bc as v,Nt as w,jp as x};
