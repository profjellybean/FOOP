import{d as w,c as f,o as i,a as u,s as C,x as b,e as d,y as B,r as $,z as y,A as k,B as g,F as h,m as x,n as G}from"./index-2e7e31eb.js";const E=w({__name:"GameOpponent",props:{mouse:null,mapComp:null},setup(_){const t=_,a=f(()=>t.mouse&&t.mouse.getComponent("pos")),r=f(()=>t.mouse&&t.mouse.getComponent("isAlive")),n=f(()=>{var o,c,e;return((e=document.getElementById(((o=a.value)==null?void 0:o.x.toString())+" "+((c=a.value)==null?void 0:c.y.toString())))==null?void 0:e.getBoundingClientRect())??{x:30,y:30}}),m=f(()=>{var s,o;return t.mapComp.map[(s=a.value)==null?void 0:s.x][(o=a.value)==null?void 0:o.y].type!="surface"});return(s,o)=>{var e,l;const c=B("v-icon");return i(),u("div",{class:"absolute h-2 w-2",style:b({top:`${(e=d(n))==null?void 0:e.y}px`,left:`${(l=d(n))==null?void 0:l.x}px`,display:d(r).isAlive&&!d(m)?"block":"none"})},[C(c,{name:"gi-seated-mouse"})],4)}}}),F=w({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(_){const t=_,a=f(()=>{var l;const e=t.player.getComponent("pos");return(l=document.getElementById(e.y.toString()+" "+e.x.toString()))==null?void 0:l.getBoundingClientRect()}),r=$(30),n=e=>{t.gameService.emit(t.player.id,"move",e)},m=y(()=>n("left"),r,{immediate:!1}),s=y(()=>n("down"),r,{immediate:!1}),o=y(()=>n("right"),r,{immediate:!1}),c=y(()=>n("up"),r,{immediate:!1});if(t.controllable){const{arrowleft:e,arrowdown:l,arrowright:v,arrowup:S}=k();g(e,p=>{p?m.resume():m.pause()}),g(l,p=>{p?s.resume():s.pause()}),g(v,p=>{p?o.resume():o.pause()}),g(S,p=>{p?c.resume():c.pause()})}return(e,l)=>{const v=B("v-icon");return i(),u("div",{class:"absolute h-6 w-6",style:b({top:`${d(a).y??"0"}px`,left:`${d(a).x??"0"}px`})},[C(v,{name:"fa-cat",scale:"2"})],4)}}}),I={class:"h-full w-full grid-flow-row auto-cols-fr"},z=["id"],M=w({__name:"GameMap",props:{mapComp:null},setup(_){const t=_;return(a,r)=>(i(),u("div",I,[(i(!0),u(h,null,x(t.mapComp.map,(n,m)=>(i(),u("div",{key:m,class:"w-full flex justify-center items-stretch bg-white"},[(i(!0),u(h,null,x(n,(s,o)=>(i(),u("div",{class:G(["grid-item p-0",{"bg-gray-400 rounded-full":s.type==="entry","bg-yellow-400 shadow-md shadow-yellow-700":s.type==="meeting"}]),key:o,id:m+" "+o},null,10,z))),128))]))),128))]))}});export{M as _,F as a,E as b};
