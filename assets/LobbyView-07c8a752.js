import{d as f,r as l,c as g,o as h,a as s,b as o,u as r,e as v,t as u,F as _,f as x,g as y,i as w,h as n,p as k}from"./index-b05410dc.js";import{G as C}from"./game-659976e2.js";const I={class:"h-full w-full bg-blue-700 flex flex-col flex-wrap gap-8 justify-center items-center"},S={class:"flex justify-start items-center mb-4"},V=o("span",{class:"text-xs"},"<",-1),B={class:"bg-white shadow-md rounded-lg p-8 text-blue-950 max-w-md"},G={class:"text-lg font-mono mb-3"},L=o("hr",{class:"mt-4 mb-2 border-gray-100"},null,-1),N=o("p",{class:"mb-2 text-xs text-gray-500"},"Connected members",-1),j={key:0},T={key:1,class:"text-fuchsia-400 text-sm"},D=f({__name:"LobbyView",setup(F){const e=w("peerService"),b=new C,t=l.currentRoute.value.params.lobbyId,i=g(()=>t===e.peerId.value);h(async()=>{e!==void 0&&(console.log("[LobbyView] peerService.peerId.value",e.peerId.value),e.peerId.value===null&&(console.log("[LobbyView] Initializing self with the lobby Id ",t),await e.initSelf(t)),e.peerConnections.value.filter(c=>c.provider.id===t).length==0&&t!==e.peerId.value&&(console.log(`[LobbyView] Connecting to lobby ${t}`),e.connectToPeer(t)))});const m=()=>{k("gameService",b),l.push(`/game/${t}`)};return(c,d)=>(n(),s("div",I,[o("div",null,[o("div",S,[o("button",{class:"rounded-full px-3 py-1 bg-slate-400/20 border border-slate-400 mix-blend-lighten text-slate-200 text-sm hover:bg-slate-400/90 hover:text-white focus:bg-slate-400/90 focus:text-white",onClick:d[0]||(d[0]=(...a)=>r(l).back&&r(l).back(...a))},[V,v(" Back ")])]),o("div",B,[o("h3",G,u(r(i)?"Your":"The")+" game lobby",1),L,N,r(e).peerConnections.value.length>0?(n(),s("ul",j,[(n(!0),s(_,null,x(r(e).peerConnections.value,(a,p)=>(n(),s("li",{key:p},u(a.provider.id),1))),128))])):(n(),s("p",T,"No peers connected")),r(i)?(n(),s("button",{key:2,class:"w-full mt-6 bg-blue-700/40 hover:bg-blue-700/60 border border-blue-700 rounded-lg p-2",onClick:m},"Start Game")):y("",!0)])])]))}});export{D as default};
