import{d as w,c as y,u as n,h as o,a as r,j as x,n as M,k as I,l as R,m as v,q as V,w as h,b as m,F as k,f as C,s as E,v as G,t as $,x as B,g as F}from"./index-fc14e496.js";import{G as N}from"./game-38a54914.js";const P={key:0},j=w({__name:"GameOpponent",props:{mouse:null},setup(_){const e=_,l=y(()=>{var t;if(e.mouse.components.isAlive===!1)return null;let s=e.mouse.getComponent("pos");return(t=document.getElementById(s.x.toString()+" "+s.y.toString()))==null?void 0:t.getBoundingClientRect()});return(s,t)=>{const a=I("v-icon");return n(l)===null?(o(),r("div",P)):(o(),r("div",{key:1,class:"absolute h-2 w-2",style:M({top:`${n(l).top}px`,left:`${n(l).left}px`})},[x(a,{name:"gi-seated-mouse",animation:"spin"})],4))}}}),z=w({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(_){const e=_,l=y(()=>{var d;let i=e.player.getComponent("pos");return(d=document.getElementById(i.x.toString()+" "+i.y.toString()))==null?void 0:d.getBoundingClientRect()}),s=R(30),t=i=>{e.gameService.emit(e.player.id,"move",i)},a=v(()=>t("left"),s,{immediate:!1}),c=v(()=>t("down"),s,{immediate:!1}),u=v(()=>t("right"),s,{immediate:!1}),f=v(()=>t("up"),s,{immediate:!1});if(e.controllable){const{arrowleft:i,arrowdown:d,arrowright:g,arrowup:b}=V();h(i,p=>{p?a.resume():a.pause()}),h(d,p=>{p?c.resume():c.pause()}),h(g,p=>{p?u.resume():u.pause()}),h(b,p=>{p?f.resume():f.pause()})}return(i,d)=>{const g=I("v-icon");return o(),r("div",{class:"absolute h-6 w-6",style:M({top:`${n(l).top}px`,left:`${n(l).left}px`})},[x(g,{name:"fa-cat",scale:"2"})],4)}}}),D={style:{border:"2px solid black"}},L=m("thead",null,null,-1),O=["id"],q=w({__name:"GameMap",props:{mapComp:null},setup(_){const e=_;return(l,s)=>(o(),r("div",null,[m("table",D,[L,m("tbody",null,[(o(!0),r(k,null,C(e.mapComp.value.map,(t,a)=>(o(),r("tr",{key:a},[(o(!0),r(k,null,C(t,(c,u)=>(o(),r("td",{class:"p-0",key:u},[m("div",{id:a+" "+u,class:E(["grid",{"bg-black":c.type=="underground","bg-white":c.type=="surface","bg-red-500":c.type=="entry","bg-yellow-500":c.type=="meeting"}])},null,10,O)]))),128))]))),128))])])]))}});const A={class:"h-full w-full bg-sky-700 flex justify-center items-center"},K=m("br",null,null,-1),Z=w({__name:"SinglePlayerGameView",setup(_){const e=new N,l="singleplayer",s=G(e.killCount),t=G(e.winCount);setTimeout(()=>{e.startGame([l])},1e3);const a=y(()=>e.currentState.value),c=y(()=>e.map),u=y(()=>a.value.players&&a.value.players[l]),f=y(()=>a.value.opponents);return(i,d)=>{const g=q,b=z,p=j;return o(),r("div",A,[m("h2",null,"Mäuse gefangen: "+$(n(s).kills),1),K,m("h2",null,"Mäuse im Ziel: "+$(n(t).wins),1),x(g,{"map-comp":n(c)},null,8,["map-comp"]),n(u)!==void 0?(o(),B(b,{key:0,player:n(u),"game-service":n(e),controllable:""},null,8,["player","game-service"])):F("",!0),m("ul",null,[(o(!0),r(k,null,C(n(f),S=>(o(),B(p,{key:S.id,mouse:S},null,8,["mouse"]))),128))])])}}});export{Z as default};
