import{d as h,c as y,u as n,h as s,a,n as B,j as M,k as f,l as I,w as v,b as m,F as k,f as C,m as R,q as S,t as G,s as V,v as $,g as E}from"./index-06d8994f.js";import{G as F}from"./game-c710df41.js";const N={key:0},P=h({__name:"GameOpponent",props:{mouse:null},setup(_){const e=_,l=y(()=>{var t;if(e.mouse.components.isAlive===!1)return null;let o=e.mouse.getComponent("pos");return(t=document.getElementById(o.x.toString()+" "+o.y.toString()))==null?void 0:t.getBoundingClientRect()});return(o,t)=>n(l)===null?(s(),a("div",N)):(s(),a("div",{key:1,class:"absolute h-2 w-2 bg-blue-400",style:B({top:`${n(l).top}px`,left:`${n(l).left}px`})},null,4))}}),j=h({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(_){const e=_,l=y(()=>{var d;let i=e.player.getComponent("pos");return(d=document.getElementById(i.x.toString()+" "+i.y.toString()))==null?void 0:d.getBoundingClientRect()}),o=M(30),t=i=>{e.gameService.emit(e.player.id,"move",i)},r=f(()=>t("left"),o,{immediate:!1}),u=f(()=>t("down"),o,{immediate:!1}),c=f(()=>t("right"),o,{immediate:!1}),g=f(()=>t("up"),o,{immediate:!1});if(e.controllable){const{arrowleft:i,arrowdown:d,arrowright:b,arrowup:w}=I();v(i,p=>{p?r.resume():r.pause()}),v(d,p=>{p?u.resume():u.pause()}),v(b,p=>{p?c.resume():c.pause()}),v(w,p=>{p?g.resume():g.pause()})}return(i,d)=>(s(),a("div",{class:"absolute h-5 w-5 bg-pink-600",style:B({top:`${n(l).top}px`,left:`${n(l).left}px`})},null,4))}}),z={style:{border:"2px solid black"}},D=m("thead",null,null,-1),L=["id"],O=h({__name:"GameMap",props:{mapComp:null},setup(_){const e=_;return(l,o)=>(s(),a("div",null,[m("table",z,[D,m("tbody",null,[(s(!0),a(k,null,C(e.mapComp.value.map,(t,r)=>(s(),a("tr",{key:r},[(s(!0),a(k,null,C(t,(u,c)=>(s(),a("td",{class:"p-0",key:c},[m("div",{id:r+" "+c,class:R(["grid",{"bg-black":u.type=="underground","bg-white":u.type=="surface","bg-red-500":u.type=="entry","bg-yellow-500":u.type=="meeting"}])},null,10,L)]))),128))]))),128))])])]))}});const q={class:"h-full w-full bg-sky-700 flex justify-center items-center"},A=m("br",null,null,-1),U=h({__name:"SinglePlayerGameView",setup(_){const e=new F,l="singleplayer",o=S(e.killCount),t=S(e.winCount);setTimeout(()=>{e.startGame([l])},1e3);const r=y(()=>e.currentState.value),u=y(()=>e.map),c=y(()=>r.value.players&&r.value.players[l]),g=y(()=>r.value.opponents);return(i,d)=>{const b=O,w=j,p=P;return s(),a("div",q,[m("h2",null,"Mäuse gefangen: "+G(n(o).kills),1),A,m("h2",null,"Mäuse im Ziel: "+G(n(t).wins),1),V(b,{"map-comp":n(u)},null,8,["map-comp"]),n(c)!==void 0?(s(),$(w,{key:0,player:n(c),"game-service":n(e),controllable:""},null,8,["player","game-service"])):E("",!0),m("ul",null,[(s(!0),a(k,null,C(n(g),x=>(s(),$(p,{key:x.id,mouse:x},null,8,["mouse"]))),128))])])}}});export{U as default};
