import{d as C,c as _,u as n,h as s,a as l,j as b,n as M,k as I,l as R,m as g,q as V,w as h,b as i,F as k,f as x,s as E,v as G,t as $,x as B,g as F}from"./index-e16c739f.js";import{G as N}from"./game-84517a67.js";const P={key:0},j=["hidden"],z=C({__name:"GameOpponent",props:{mouse:null,mapComp:null,hidden:{type:Boolean}},setup(d){const e=d,a=_(()=>{var o;if(e.mouse.components.isAlive===!1)return null;let t=e.mouse.getComponent("pos");return(o=document.getElementById(t.x.toString()+" "+t.y.toString()))==null?void 0:o.getBoundingClientRect()}),r=_(()=>{let t=e.mouse.getComponent("pos");return console.log(e.mapComp.value.map[t.x][t.y].type),e.mapComp.value.map[t.x][t.y].type!="surface"});return(t,o)=>{const c=I("v-icon");return n(a)===null?(s(),l("div",P)):(s(),l("div",{key:1,class:"absolute h-2 w-2",hidden:n(r),style:M({top:`${n(a).top}px`,left:`${n(a).left}px`})},[b(c,{name:"gi-seated-mouse",animation:"spin"})],12,j))}}}),D=C({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(d){const e=d,a=_(()=>{var y;let u=e.player.getComponent("pos");return(y=document.getElementById(u.x.toString()+" "+u.y.toString()))==null?void 0:y.getBoundingClientRect()}),r=R(30),t=u=>{e.gameService.emit(e.player.id,"move",u)},o=g(()=>t("left"),r,{immediate:!1}),c=g(()=>t("down"),r,{immediate:!1}),m=g(()=>t("right"),r,{immediate:!1}),v=g(()=>t("up"),r,{immediate:!1});if(e.controllable){const{arrowleft:u,arrowdown:y,arrowright:f,arrowup:w}=V();h(u,p=>{p?o.resume():o.pause()}),h(y,p=>{p?c.resume():c.pause()}),h(f,p=>{p?m.resume():m.pause()}),h(w,p=>{p?v.resume():v.pause()})}return(u,y)=>{const f=I("v-icon");return s(),l("div",{class:"absolute h-6 w-6",style:M({top:`${n(a).top}px`,left:`${n(a).left}px`})},[b(f,{name:"fa-cat",scale:"2"})],4)}}}),L={style:{border:"2px solid black"}},O=i("thead",null,null,-1),q=["id"],A=C({__name:"GameMap",props:{mapComp:null},setup(d){const e=d;return(a,r)=>(s(),l("div",null,[i("table",L,[O,i("tbody",null,[(s(!0),l(k,null,x(e.mapComp.value.map,(t,o)=>(s(),l("tr",{key:o},[(s(!0),l(k,null,x(t,(c,m)=>(s(),l("td",{class:"p-0",key:m},[i("div",{id:o+" "+m,class:E(["grid","bg-white"])},null,8,q)]))),128))]))),128))])])]))}});const K={class:"h-full w-full bg-sky-700 flex justify-center items-center"},T=i("br",null,null,-1),H=C({__name:"SinglePlayerGameView",setup(d){const e=new N,a="singleplayer",r=G(e.killCount),t=G(e.winCount);setTimeout(()=>{e.startGame([a])},1e3);const o=_(()=>e.currentState.value),c=_(()=>e.map),m=_(()=>o.value.players&&o.value.players[a]),v=_(()=>o.value.opponents);return(u,y)=>{const f=A,w=D,p=z;return s(),l("div",K,[i("h2",null,"Mäuse gefangen: "+$(n(r).kills),1),T,i("h2",null,"Mäuse im Ziel: "+$(n(t).wins),1),b(f,{"map-comp":n(c)},null,8,["map-comp"]),n(m)!==void 0?(s(),B(w,{key:0,player:n(m),"game-service":n(e),controllable:""},null,8,["player","game-service"])):F("",!0),i("ul",null,[(s(!0),l(k,null,x(n(v),S=>(s(),B(p,{key:S.id,mouse:S,mapComp:n(c)},null,8,["mouse","mapComp"]))),128))])])}}});export{H as default};
