import{d as h,c as d,h as s,a as l,n as G,u as r,j as B,k as v,l as C,w as b,b as y,F as w,f as k,m as $,q as I,s as x,g as M}from"./index-1692ef97.js";import{G as V}from"./game-45294aa2.js";const E=h({__name:"GameOpponent",props:{mouse:null},setup(i){const e=i,o=d(()=>{var n;let t=e.mouse.getComponent("pos");return(n=document.getElementById(t.x.toString()+" "+t.y.toString()))==null?void 0:n.getBoundingClientRect()});return(t,n)=>(s(),l("div",{class:"absolute h-2 w-2 bg-blue-400",style:G({top:`${r(o).top}px`,left:`${r(o).left}px`})},null,4))}}),F=h({__name:"GamePlayer",props:{player:null,controllable:{type:Boolean},gameService:null},setup(i){const e=i,o=d(()=>{var u;let a=e.player.getComponent("pos");return(u=document.getElementById(a.x.toString()+" "+a.y.toString()))==null?void 0:u.getBoundingClientRect()}),t=B(30),n=a=>{e.gameService.emit(e.player.id,"move",a)},c=v(()=>n("left"),t,{immediate:!1}),p=v(()=>n("down"),t,{immediate:!1}),_=v(()=>n("right"),t,{immediate:!1}),g=v(()=>n("up"),t,{immediate:!1});if(e.controllable){const{arrowleft:a,arrowdown:u,arrowright:f,arrowup:S}=C();b(a,m=>{m?c.resume():c.pause()}),b(u,m=>{m?p.resume():p.pause()}),b(f,m=>{m?_.resume():_.pause()}),b(S,m=>{m?g.resume():g.pause()})}return(a,u)=>(s(),l("div",{class:"absolute h-5 w-5 bg-pink-600",style:G({top:`${r(o).top}px`,left:`${r(o).left}px`})},null,4))}}),N={style:{border:"2px solid black"}},P=y("thead",null,null,-1),R=["id"],j=h({__name:"GameMap",props:{mapComp:null},setup(i){const e=i;return(o,t)=>(s(),l("div",null,[y("table",N,[P,y("tbody",null,[(s(!0),l(w,null,k(e.mapComp.map,(n,c)=>(s(),l("tr",{key:c},[(s(!0),l(w,null,k(n,(p,_)=>(s(),l("td",{class:"p-0",key:_},[y("div",{id:c+" "+_,class:$(["grid",{"bg-black":p.type=="underground","bg-white":p.type=="surface","bg-red-500":p.type=="entry","bg-yellow-500":p.type=="meeting"}])},null,10,R)]))),128))]))),128))])])]))}});const z={class:"h-full w-full bg-sky-700 flex justify-center items-center"},q=h({__name:"SinglePlayerGameView",setup(i){const e=new V,o="singleplayer";setTimeout(()=>{e.startGame([o])},1e3);const t=d(()=>e.currentState.value),n=d(()=>t.value.players&&t.value.players[o]),c=d(()=>t.value.opponents);return(p,_)=>{const g=j,a=F,u=E;return s(),l("div",z,[I(g,{"map-comp":r(e).map.value},null,8,["map-comp"]),r(n)!==void 0?(s(),x(a,{key:0,player:r(n),"game-service":r(e),controllable:""},null,8,["player","game-service"])):M("",!0),y("ul",null,[(s(!0),l(w,null,k(r(c),f=>(s(),x(u,{key:f.id,mouse:f},null,8,["mouse"]))),128))])])}}});export{q as default};
